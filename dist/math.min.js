/**
 * math.js
 * https://github.com/josdejong/mathjs
 *
 * Math.js is an extensive math library for JavaScript and Node.js,
 * It features real and complex numbers, units, matrices, a large set of
 * mathematical functions, and a flexible expression parser.
 *
 * @version 0.11.2-SNAPSHOT
 * @date    2013-08-04
 *
 * @license
 * Copyright (C) 2013 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function(){function e(e){return e instanceof Boolean||"boolean"==typeof e}function r(e,t){if(!(this instanceof r))throw new SyntaxError("Complex constructor must be called with the new operator");switch(arguments.length){case 0:this.re=0,this.im=0;break;case 2:if(!g(e)||!g(t))throw new TypeError("Two numbers expected in Complex constructor");this.re=e,this.im=t;break;default:if(0!=arguments.length&&2!=arguments.length)throw new SyntaxError("Two or zero arguments expected in Complex constructor")}}function t(e){e&&rr.extend(this,e)}function n(e){if(!(this instanceof n))throw new SyntaxError("Matrix constructor must be called with the new operator");if(e instanceof n||e instanceof d)this._data=e.toArray();else if(Array.isArray(e))this._data=e;else{if(null!=e)throw new TypeError("Unsupported type of data ("+er["typeof"](e)+")");this._data=[]}this._size=rr.size(this._data)}function a(e,r){return rr.validateIndex(r,e.length),e[r]}function i(e,r){return r.forEach(function(r){e=a(e,r)}),er.clone(e)}function o(e,r){var t=r[0];return t.map?t.map(function(r){return a(e,r)}):[a(e,t)]}function s(e,r){var t=r[0],n=r[1];if(t.map)return n.map?t.map(function(r){var t=a(e,r);return n.map(function(e){return a(t,e)})}):t.map(function(r){return[a(a(e,r),n)]});if(n.map){var i=a(e,t);return[n.map(function(e){return a(i,e)})]}return[[a(a(e,t),n)]]}function u(e,r,t){var n=t==r.length-1,i=r[t],o=function(i){var o=a(e,i);return n?o:u(o,r,t+1)};return i.map?i.map(o):[o(i)]}function f(e,r,t){if(rr.validateIndex(r),Array.isArray(t))throw new TypeError("Dimension mismatch, value expected instead of array");e[r]=t}function l(e,r,t,n){var a=!1;t.length>r.length&&(a=!0);for(var i=0;i<t.length;i++){var o=t[i];rr.validateIndex(o),(null==r[i]||o+1>r[i])&&(r[i]=o+1,a=!0)}a&&rr.resize(e,r,0);var s=r.length;t.forEach(function(r,t){s-1>t?e=e[r]:e[r]=n})}function c(e,r,t,n){var a=t[0];rr.validateIndex(a),a+1>r[0]&&(rr.resize(e,[a+1],0),r[0]=a+1),e[a]=n}function m(e,r,t,n){var a=t[0],i=t[1];rr.validateIndex(a),rr.validateIndex(i);var o=!1;a+1>(r[0]||0)&&(r[0]=a+1,o=!0),i+1>(r[1]||0)&&(r[1]=i+1,o=!0),o&&rr.resize(e,r,0),e[a][i]=n}function h(e,r,t,n,a){var i=n==t.length-1,o=t[n],s=function(o,s){if(i)f(e,o,a[s]),o+1>(r[n]||0)&&(r[n]=o+1);else{var u=e[o];Array.isArray(u)||(e[o]=u=[u]),o+1>(r[n]||0)&&(r[n]=o+1),h(u,r,t,n+1,a[s])}};if(o.map){var u=o.size&&o.size()||o.length;if(u!=a.length)throw new RangeError("Dimensions mismatch ("+u+" != "+a.length+")");o.map(s)}else s(o,0)}function p(e){for(var r=0,t=e.length;t>r;r++){var n=e[r];Array.isArray(n)?p(n):void 0==n&&(e[r]=0)}}function g(e){return e instanceof Number||"number"==typeof e}function v(e){return e==Math.round(e)}function d(e,r,t){if(!(this instanceof d))throw new SyntaxError("Range constructor must be called with the new operator");if(null!=e&&!g(e))throw new TypeError("Parameter start must be a number");if(null!=t&&!g(t))throw new TypeError("Parameter end must be a number");if(null!=r&&!g(r))throw new TypeError("Parameter step must be a number");this.start=null!=e?e:0,this.end=null!=t?t:0,this.step=null!=r?r:1}function y(e,r){var t=er.type.Selector,n=Array.prototype.slice;t.prototype[e]="function"==typeof r?function(){var e=[this.value].concat(n.call(arguments,0));return new t(r.apply(this,e))}:new t(r)}function x(e){return e instanceof String||"string"==typeof e}function w(e,r){if(!(this instanceof w))throw new Error("Unit constructor must be called with the new operator");if(null!=e&&!g(e))throw new TypeError("First parameter in Unit constructor must be a number");if(null!=r&&!x(r))throw new TypeError("Second parameter in Unit constructor must be a string");if(null!=r){var t=b(r);if(!t)throw new SyntaxError('String "'+r+'" is no unit');this.unit=t.unit,this.prefix=t.prefix}else this.unit=w.UNIT_NONE,this.prefix=w.PREFIX_NONE;null!=e?(this.value=this._normalize(e),this.fixPrefix=!1):(this.value=null,this.fixPrefix=!0)}function b(e){for(var r=w.UNITS,t=0,n=r.length;n>t;t++){var a=r[t];if(rr.endsWith(e,a.name)){var i=e.length-a.name.length,o=e.substring(0,i),s=a.prefixes[o];if(void 0!==s)return{unit:a,prefix:s}}}return null}function E(e,r){var t=void 0;if(2==arguments.length){var n=er["typeof"](r);t="Function "+e+"("+n+") not supported"}else if(arguments.length>2){for(var a=[],i=1;i<arguments.length;i++)a.push(er["typeof"](arguments[i]));t="Function "+e+"("+a.join(", ")+") not supported"}else t="Unsupported parameter in function "+e;return new TypeError(t)}function O(e,r,t,n){var a="Wrong number of arguments in function "+e+" ("+r+" provided, "+t+(void 0!=n?"-"+n:"")+" expected)";return new SyntaxError(a)}function A(){}function N(e){this.value=e}function M(e,r,t){this.name=e,this.fn=r,this.params=t}function S(e,r){this.name=e,this.scope=r}function T(e,r,t){if(this.object=e,this.params=r,this.paramScopes=t,this.hasContextParams=!1,r)for(var n={type:er.type.SymbolNode,properties:{name:"end"}},a=0,i=r.length;i>a;a++)if(r[a].find(n).length>0){this.hasContextParams=!0;break}}function q(e){this.nodes=e||[]}function z(){this.params=[],this.visible=[]}function R(e,r,t){this.name=e,this.expr=r,this.scope=t}function C(e,r,t,n,a){this.name=e,this.params=r,this.paramScopes=t,this.expr=n,this.scope=a,this.hasContextParams=!1;for(var i={type:er.type.SymbolNode,properties:{name:"end"}},o=0,s=r.length;s>o;o++)if(r[o].find(i).length>0){this.hasContextParams=!0;break}}function U(e,r,t,n,a){this.name=e,this.variables=r,this.expr=t,this.scope=a,this.fn=function(){var a=r?r.length:0;if(arguments.length!=a)throw O(e,arguments.length,a);for(var i=0;a>i;i++)n.set(r[i],arguments[i]);return t.eval()},this.fn.toString=function(){return e+"("+r.join(", ")+")"}}function L(e,t){var n=t.re*t.re+t.im*t.im;return 0!=n?r.create((e.re*t.re+e.im*t.im)/n,(e.im*t.re-e.re*t.im)/n):r.create(0!=e.re?e.re/0:0,0!=e.im?e.im/0:0)}function I(e,r){if(r>0)return e>0?e%r:0==e?0:e-r*Math.floor(e/r);if(0==r)return e;throw new Error("Cannot calculate mod for a negative divisor")}function _(e,t){return 0==e.im?0==t.im?e.re*t.re:0==t.re?new r(0,e.re*t.im):new r(e.re*t.re,e.re*t.im):0==e.re?0==t.im?new r(0,e.im*t.re):0==t.re?-e.im*t.im:new r(-e.im*t.im,e.im*t.re):0==t.im?new r(e.re*t.re,e.im*t.re):0==t.re?new r(-e.im*t.im,e.re*t.im):new r(e.re*t.re-e.im*t.im,e.re*t.im+e.im*t.re)}function P(e,r){var t=er.log(e),n=er.multiply(t,r);return er.exp(n)}function B(e,r){if(r){var t=Math.pow(10,r);return Math.round(e*t)/t}return Math.round(e)}function G(e){if(Array.isArray(e)||e instanceof n||e instanceof d){for(var r=e.valueOf(),t="[",a=r.length,i=0;a>i;i++)0!=i&&(t+=", "),t+=G(r[i]);return t+="]"}return g(e)?rr.formatNumber(e):e.toString()}function j(e,r,t,n){if(t>n){if(e.length!=r.length)throw new Error("Dimensions mismatch ("+e.length+" != "+r.length+")");for(var a=[],i=0;i<e.length;i++)a[i]=j(e[i],r[i],t,n+1);return a}return e.concat(r)}function k(e,r,t){var n=er.multiply,a=er.subtract;if(1==r)return e[0][0];if(2==r)return a(n(e[0][0],e[1][1]),n(e[1][0],e[0][1]));for(var i=1,o=0,s=0;r>s&&!(o>=t);s++){for(var u=s;0==e[u][o];)if(u++,u==r&&(u=s,o++,o==t))return rr.deepEqual(e,er.eye(r).valueOf())?er.round(i,6):0;if(u!=s){for(var f=0;t>f;f++){var l=e[u][f];e[u][f]=e[s][f],e[s][f]=l}i*=-1}for(var c=e[s][o],f=0;t>f;f++)e[s][f]=e[s][f]/c;i*=c;for(var m=0;r>m;m++)if(m!=s)for(var h=e[m][o],f=0;t>f;f++)e[m][f]=e[m][f]-e[s][f]*h;o++}return rr.deepEqual(e,er.eye(r).valueOf())?er.round(i,6):0}function F(e,r,t){var n,a,i,o,s,u=er.add,f=er.unary,l=er.multiply,c=er.divide;if(1==r){if(o=e[0][0],0==o)throw Error("Cannot calculate inverse, determinant is zero");return[[c(1,o)]]}if(2==r){var m=er.det(e);if(0==m)throw Error("Cannot calculate inverse, determinant is zero");return[[c(e[1][1],m),c(f(e[0][1]),m)],[c(f(e[1][0]),m),c(e[0][0],m)]]}var h=e.concat();for(n=0;r>n;n++)h[n]=h[n].concat();for(var p=er.eye(r).valueOf(),g=0;t>g;g++){for(n=g;r>n&&0==h[n][g];)n++;if(n==r||0==h[n][g])throw Error("Cannot calculate inverse, determinant is zero");n!=g&&(s=h[g],h[g]=h[n],h[n]=s,s=p[g],p[g]=p[n],p[n]=s);var v=h[g],d=p[g];for(n=0;r>n;n++){var y=h[n],x=p[n];if(n!=g){if(0!=y[g]){for(i=c(f(y[g]),v[g]),a=g;t>a;a++)y[a]=u(y[a],l(i,v[a]));for(a=0;t>a;a++)x[a]=u(x[a],l(i,d[a]))}}else{for(i=v[g],a=g;t>a;a++)y[a]=c(y[a],i);for(a=0;t>a;a++)x[a]=c(x[a],i)}}}return p}function V(e){if(1==e.length)return V(e[0]);for(var r=0,t=e.length;t>r;r++){var n=e[r];Array.isArray(n)&&(e[r]=V(n))}return e}function H(e,r){var t,a;return Array.isArray(e)||e instanceof d?(t=er.matrix(e),a=t.get(r),a.valueOf()):e instanceof n?e.get(r):x(e)?D(e,r):(t=er.matrix([e]),a=t.get(r),a.valueOf())}function D(e,r){var t,n;if(r=r.valueOf(),1!=r.length)throw new RangeError("Dimension mismatch ("+r.length+" != 1)");Array.isArray(r)&&(r=r[0]),r=r.valueOf(),Array.isArray(r)||(r=[r]);var a="",i=e.length;for(t=0,n=r.length;n>t;t++){var o=r[t];rr.validateIndex(o,i),a+=e.charAt(o)}return a}function Y(e,r,t){if(Array.isArray(e)||e instanceof d){var a=er.matrix(er.clone(e));return a.set(r,t),a.valueOf()}return e instanceof n?e.clone().set(r,t):x(e)?W(e,r,t):(a=er.matrix([e]),a.set(r,t),a.isScalar()?a.toScalar():a.valueOf())}function W(e,r,t){var n,a;if(r=r.valueOf(),1!=r.length)throw new RangeError("Dimension mismatch ("+r.length+" != 1)");if(Array.isArray(r)&&(r=r[0]),r=r.valueOf(),Array.isArray(r)||(r=[r]),r.length!=t.length)throw new RangeError("Dimension mismatch ("+r.length+" != "+t.length+")");var i=e.length,o=[];for(n=0;i>n;n++)o[n]=e.charAt(n);for(n=0,a=r.length;a>n;n++){var s=r[n];rr.validateIndex(s),o[s]=t.charAt(n)}if(o.length>i)for(n=i-1,a=o.length;a>n;n++)o[n]||(o[n]=" ");return o.join("")}function Q(e){for(var r=er.larger,t=e[0],n=1,a=e.length;a>n;n++){var i=e[n];r(i,t)&&(t=i)}return t}function K(e,r,t){for(var n=er.larger,a=[],i=0;t>i;i++){for(var o=e[0][i],s=1;r>s;s++){var u=e[s][i];n(u,o)&&(o=u)}a[i]=o}return a}function Z(e){for(var r=er.smaller,t=e[0],n=1,a=e.length;a>n;n++){var i=e[n];r(i,t)&&(t=i)}return t}function X(e,r,t){for(var n=er.smaller,a=[],i=0;t>i;i++){for(var o=e[0][i],s=1;r>s;s++){var u=e[s][i];n(u,o)&&(o=u)}a[i]=o}return a}function $(e,r,t){(t.override||void 0===er[e])&&(er[e]=t.wrap&&"function"==typeof r?function(){for(var e=[],t=0,n=arguments.length;n>t;t++)e[t]=arguments[t].valueOf();return r.apply(er,e)}:r,y(e,r))}function J(e){return"function"==typeof e||g(e)||x(e)||e instanceof r||e instanceof w}var er={type:{},expr:{node:{handlers:{}}},docs:{},options:{precision:5}},rr=function(){function e(r){if(Array.isArray(r)){var t=r.length;if(t){var n=e(r[0]);return 0==n[0]?[0].concat(n):[t].concat(n)}return[t]}return[]}function r(e,t,n){var a,i=e.length;if(i!=t[n])throw new RangeError("Dimension mismatch ("+i+" != "+t[n]+")");if(n<t.length-1){var o=n+1;for(a=0;i>a;a++){var s=e[a];if(!Array.isArray(s))throw new RangeError("Dimension mismatch ("+(t.length-1)+" < "+t.length+")");r(e[a],t,o)}}else for(a=0;i>a;a++)if(Array.isArray(e[a]))throw new RangeError("Dimension mismatch ("+(t.length+1)+" > "+t.length+")")}function t(e,r,n){if(n<r.length-1){var a=e[0];if(1!=e.length||!Array.isArray(a))throw new RangeError("Dimension mismatch ("+e.length+" > 0)");t(a,r,n+1)}else if(e.length)throw new RangeError("Dimension mismatch ("+e.length+" > 0)")}function a(e,r,t,n){if(!Array.isArray(e))throw new TypeError("Array expected");var i=e.length,o=r[t];if(i!=o){if(o>e.length)for(var s=e.length;o>s;s++)e[s]=n?er.clone(n):0;else e.length=r[t];i=e.length}if(t<r.length-1){var u=t+1;for(s=0;i>s;s++)f=e[s],Array.isArray(f)||(f=[f],e[s]=f),a(f,r,u,n)}else for(s=0;i>s;s++){for(var f=e[s];Array.isArray(f);)f=f[0];e[s]=f}}var i={};i.formatNumber=function(e,r){if(1/0===e)return"Infinity";if(e===-1/0)return"-Infinity";if(isNaN(e))return"NaN";var t=Math.abs(e);if(t>.001&&1e5>t||0==t)return i.toPrecision(e,r);var n=Math.round(Math.log(t)/Math.LN10),a=e/Math.pow(10,n);return i.toPrecision(a,r)+"e"+n},i.toPrecision=function(e,r){return e.toPrecision(r).replace(o,function(e,r,t){return e.substring(0,e.length-(r.length?0:1)-t.length)})};var o=/\.(\d*?)(0+)$/g;return i.formatArray=function(e){if(Array.isArray(e)){for(var r="[",t=e.length,n=0;t>n;n++)0!=n&&(r+=", "),r+=i.formatArray(e[n]);return r+="]"}return er.format(e)},i.formatArray2d=function(e){var r="[",t=i.size(e);if(2!=t.length)throw new RangeError("Array must be two dimensional (size: "+i.formatArray(t)+")");for(var n=t[0],a=t[1],o=0;n>o;o++){0!=o&&(r+="; ");for(var s=e[o],u=0;a>u;u++){0!=u&&(r+=", ");var f=s[u];void 0!=f&&(r+=er.format(f))}}return r+="]"},i.argsToArray=function(e){var r;if(0==e.length)r=[];else if(1==e.length)r=e[0],r instanceof n&&(r=r.toVector()),r instanceof d&&(r=r.valueOf()),Array.isArray(r)||(r=[r]);else{r=[];for(var t=0;t<e.length;t++)r[t]=e[t]}return r},i.endsWith=function(e,r){var t=e.length-r.length,n=e.length;return e.substring(t,n)===r},i.extend=function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e},i.deepExtend=function s(e,r){for(var t in r)r.hasOwnProperty(t)&&(r[t]&&r[t].constructor===Object?(void 0===e[t]&&(e[t]={}),e[t].constructor===Object?s(e[t],r[t]):e[t]=r[t]):e[t]=r[t]);return e},i.randomUUID=function(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},i.map=function(e,r){if(Array.isArray(e)||e instanceof n||e instanceof d)return e.map(function(e){return r(e)});throw new TypeError("Array expected")},i.deepMap=function u(e,r){return Array.isArray(e)||e instanceof n||e instanceof d?e.map(function(e){return u(e,r)}):r(e)},i.map2=function(e,r,t){var a,o,s;if(e instanceof n||r instanceof n)return new n(i.map2(e.valueOf(),r.valueOf(),t));if(e instanceof d||r instanceof d)return i.map2(e.valueOf(),r.valueOf(),t);if(Array.isArray(e))if(Array.isArray(r)){if(e.length!=r.length)throw new RangeError("Dimension mismatch ("+e.length+" != "+r.length+")");for(a=[],o=e.length,s=0;o>s;s++)a[s]=t(e[s],r[s])}else for(a=[],o=e.length,s=0;o>s;s++)a[s]=t(e[s],r);else if(Array.isArray(r))for(a=[],o=r.length,s=0;o>s;s++)a[s]=t(e,r[s]);else a=t(e,r);return a},i.deepMap2=function f(e,r,t){var a,i,o;if(e instanceof n||r instanceof n)return new n(f(e.valueOf(),r.valueOf(),t));if(e instanceof d||r instanceof d)return f(e.valueOf(),r.valueOf(),t);if(Array.isArray(e))if(Array.isArray(r)){if(e.length!=r.length)throw new RangeError("Dimension mismatch ("+e.length+" != "+r.length+")");for(a=[],i=e.length,o=0;i>o;o++)a[o]=f(e[o],r[o],t)}else for(a=[],i=e.length,o=0;i>o;o++)a[o]=f(e[o],r,t);else if(Array.isArray(r))for(a=[],i=r.length,o=0;i>o;o++)a[o]=f(e,r[o],t);else a=t(e,r);return a},i.mapObject=function(e,r){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]));return t},i.deepEqual=function(e,r){var t,n,a;if(Array.isArray(e)){if(!Array.isArray(r))return!1;for(n=0,a=e.length;a>n;n++)if(!i.deepEqual(e[n],r[n]))return!1;return!0}if(e instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(t in e)if(e.hasOwnProperty(t)&&!i.deepEqual(e[t],r[t]))return!1;for(t in r)if(r.hasOwnProperty(t)&&!i.deepEqual(e[t],r[t]))return!1;return!0}return e.valueOf()==r.valueOf()},i.size=function(r){var t=e(r);return i.validate(r,t),t},i.validate=function(e,n){var a=0==n.length;if(a){if(Array.isArray(e))throw new RangeError("Dimension mismatch ("+e.length+" != 0)")}else{var o=-1!=n.indexOf(0);o?(n.forEach(function(e){if(0!=e)throw new RangeError("Invalid size, all dimensions must be either zero or non-zero (size: "+i.formatArray(n)+")")}),t(e,n,0)):r(e,n,0)}},i.validateIndex=function(e,r){if(!g(e)||!v(e))throw new TypeError("Index must be an integer (value: "+e+")");if(0>e)throw new RangeError("Index out of range ("+e+" < 0)");if(void 0!==r&&e>=r)throw new RangeError("Index out of range ("+e+" >= "+r+")")},i.resize=function(e,r,t){if(!Array.isArray(r))throw new TypeError("Size must be an array (size is "+er["typeof"](r)+")");r.forEach(function(e){if(!g(e)||!v(e)||0>e)throw new TypeError("Invalid size, must contain positive integers (size: "+i.formatArray(r)+")")});var n=-1!=r.indexOf(0);n&&r.forEach(function(e){if(0!=e)throw new RangeError("Invalid size, all dimensions must be either zero or non-zero (size: "+i.formatArray(r)+")")}),a(e,r,0,t)},i}();er.type.Complex=r,function(){function e(){for(;" "==l||"	"==l;)a()}function t(e){return e>="0"&&"9">=e||"."==e}function n(e){return e>="0"&&"9">=e}function a(){f++,l=u.charAt(f)}function i(e){f=e,l=u.charAt(f)}function o(){var e,r="";if(e=f,"+"==l?a():"-"==l&&(r+=l,a()),!t(l))return i(e),null;if("."==l){if(r+=l,a(),!n(l))return i(e),null}else{for(;n(l);)r+=l,a();"."==l&&(r+=l,a())}for(;n(l);)r+=l,a();if("E"==l||"e"==l){if(r+=l,a(),("+"==l||"-"==l)&&(r+=l,a()),!n(l))return i(e),null;for(;n(l);)r+=l,a()}return r}function s(){var e=u.charAt(f+1);if("I"==l||"i"==l)return a(),"1";if(!("+"!=l&&"-"!=l||"I"!=e&&"i"!=e)){var r="+"==l?"1":"-1";return a(),a(),r}return null}var u,f,l;r.create=function(e,t){return 0==t?e:new r(e,t)},r.parse=function(t){if(u=t,f=-1,l="",!x(u))return null;a(),e();var n=o();if(n){if("I"==l||"i"==l)return a(),e(),l?null:new r(0,Number(n));e();var i=l;if("+"!=i&&"-"!=i)return e(),l?null:new r(Number(n),0);a(),e();var c=o();if(c){if("I"!=l&&"i"!=l)return null;a()}else if(c=s(),!c)return null;return"-"==i&&(c="-"==c[0]?"+"+c.substring(1):"-"+c),a(),e(),l?null:new r(Number(n),Number(c))}return(n=s())?(e(),l?null:new r(0,Number(n))):null}}(),r.prototype.clone=function(){return new r(this.re,this.im)},r.prototype.toString=function(){var e="",r=rr.formatNumber(this.re,er.options.precision),t=rr.formatNumber(this.im,er.options.precision);return e=0==this.im?r:0==this.re?1==this.im?"i":-1==this.im?"-i":t+"i":this.im>0?1==this.im?r+" + i":r+" + "+t+"i":-1==this.im?r+" - i":r+" - "+rr.formatNumber(Math.abs(this.im),er.options.precision)+"i"},er.type.Help=t,t.prototype.toString=function(){var e="\n";if(this.name&&(e+="Name: "+this.name+"\n\n"),this.category&&(e+="Category: "+this.category+"\n\n"),this.syntax&&(e+="Syntax:\n    "+this.syntax.join("\n    ")+"\n\n"),this.examples){var r=er.parser();e+="Examples:\n";for(var n=0;n<this.examples.length;n++){var a,i=this.examples[n];try{a=r.eval(i)}catch(o){a=o}e+="    "+i+"\n",!a||a instanceof t||(e+="        "+er.format(a)+"\n")}e+="\n"}return this.seealso&&(e+="See also: "+this.seealso.join(", ")+"\n"),e},t.prototype.toJSON=function(){return rr.extend({},this)},er.type.Matrix=n,n.prototype.get=function(e){var r;if(e instanceof n)r=1==e.size().length||!e.size().some(function(e){return 0!=e}),e=e.valueOf();else{if(!Array.isArray(e))throw new TypeError("Invalid index");r=!e.some(function(e){var r=er.size(e);return 0!=r.length&&r!=[0]})}if(e.length!=this._size.length)throw new RangeError("Dimension mismatch ("+e.length+" != "+this._size.length+")");if(r)switch(e.length){case 1:return a(this._data,e[0]);case 2:return a(a(this._data,e[0]),e[1]);default:return i(this._data,e)}else switch(e.length){case 1:return new n(o(this._data,e));case 2:return new n(s(this._data,e));default:return new n(u(this._data,e,0))}},n.prototype.set=function(e,r){var t;if(e instanceof n)t=1==e.size().length||!e.size().some(function(e){return 0!=e}),e=e.valueOf();else{if(!Array.isArray(e))throw new TypeError("Invalid index");t=!e.some(function(e){var r=er.size(e);return 0!=r.length&&r!=[0]})}if((r instanceof n||r instanceof d)&&(r=r.valueOf()),e.length<this._size.length)throw new RangeError("Dimension mismatch ("+e.length+" != "+this._size.length+")");if(t){if(0!=er.size(r).valueOf().length)throw new TypeError("Scalar value expected");switch(e.length){case 1:c(this._data,this._size,e,r);break;case 2:m(this._data,this._size,e,r);break;default:l(this._data,this._size,e,r)}}else{var a=this._size.concat();h(this._data,a,e,0,r),rr.deepEqual(this._size,a)||(p(this._data),this.resize(a))}return this},n.prototype.resize=function(e,r){rr.resize(this._data,e,r),this._size=er.clone(e)},n.prototype.clone=function(){var e=new n;return e._data=er.clone(this._data),e._size=er.clone(this._size),e},n.prototype.size=function(){return this._size},n.prototype.map=function(e){var r=this,t=new n,a=[],i=function(t,n){return Array.isArray(t)?t.map(function(e,r){return a[n]=r,i(e,n+1)}):e(t,a,r)};return t._data=i(this._data,0),t._size=er.clone(this._size),t},n.prototype.forEach=function(e){var r=this,t=[],n=function(a,i){Array.isArray(a)?a.forEach(function(e,r){t[i]=r,n(e,i+1)}):e(a,t,r)};n(this._data,0)},n.prototype.toScalar=function(){for(var e=this._data;Array.isArray(e)&&1==e.length;)e=e[0];return Array.isArray(e)?null:er.clone(e)},n.prototype.isScalar=function(){return this._size.every(function(e){return 1>=e})},n.prototype.toVector=function(){var e=0,r=void 0,t=[];if(this._size.forEach(function(n,a){n>1&&(e++,r=a),t[a]=0}),0==e){var n=this.toScalar();return n?[n]:[]}if(1==e){var a=[],i=function(e){Array.isArray(e)?e.forEach(i):a.push(e)};return i(this._data),a}return null},n.prototype.isVector=function(){var e=0;return this._size.forEach(function(r){r>1&&e++}),1>=e},n.prototype.toArray=function(){return er.clone(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.toString=function(){return er.format(this._data)},er.type.Range=d,d.parse=function(e){if(!x(e))return null;var r=e.split(":"),t=r.map(function(e){return Number(e)}),n=t.some(function(e){return isNaN(e)});if(n)return null;switch(t.length){case 2:return new d(t[0],1,t[1]);case 3:return new d(t[0],t[1],t[2]);default:return null}},d.prototype.clone=function(){return new d(this.start,this.step,this.end)},d.prototype.size=function(){var e=0,r=Number(this.start),t=Number(this.step),n=Number(this.end),a=n-r;return er.sign(t)==er.sign(a)?e=Math.floor(a/t)+1:0==a&&(e=1),isNaN(e)&&(e=0),[e]},d.prototype.forEach=function(e){var r=Number(this.start),t=Number(this.step),n=Number(this.end),a=0;if(t>0)for(;n>=r;)e(r,a,this),r+=t,a++;else if(0>t)for(;r>=n;)e(r,a,this),r+=t,a++},d.prototype.map=function(e){var r=[];return this.forEach(function(t,n,a){r[n]=e(t,n,a)}),r},d.prototype.toMatrix=function(){return new n(this.toArray())},d.prototype.toArray=function(){var e=[];return this.forEach(function(r,t){e[t]=r}),e},d.prototype.toVector=d.prototype.toArray,d.prototype.isVector=function(){return!0},d.prototype.toScalar=function(){var e=this.toArray();return 1==e.length?e[0]:null},d.prototype.isScalar=function(){return 1==this.size()[0]},d.prototype.valueOf=function(){return this.toArray()},d.prototype.toString=function(){var e=er.format(Number(this.start));return 1!=this.step&&(e+=":"+er.format(Number(this.step))),e+=":"+er.format(Number(this.end))},er.type.Selector=function(e){if(!(this instanceof er.type.Selector))throw new SyntaxError("Selector constructor must be called with the new operator");this.value=e instanceof er.type.Selector?e.value:e},er.type.Selector.prototype={done:function(){return this.value},get:function(e){var r=this.value;if(!r)throw Error("Selector value is undefined");return new er.type.Selector(er.subset(r,e))},set:function(e,r){var t=this.value;if(!t)throw Error("Selector value is undefined");return new er.type.Selector(er.subset(t,e,r))},valueOf:function(){return this.value},toString:function(){return er.format(this.value)}},er.type.Unit=w,function(){function e(){for(;" "==f||"	"==f;)n()}function r(e){return e>="0"&&"9">=e||"."==e}function t(e){return e>="0"&&"9">=e}function n(){u++,f=s.charAt(u)}function a(e){u=e,f=s.charAt(u)}function i(){var e,i="";if(e=u,"+"==f?n():"-"==f&&(i+=f,n()),!r(f))return a(e),null;if("."==f){if(i+=f,n(),!t(f))return a(e),null}else{for(;t(f);)i+=f,n();"."==f&&(i+=f,n())}for(;t(f);)i+=f,n();if("E"==f||"e"==f){if(i+=f,n(),("+"==f||"-"==f)&&(i+=f,n()),!t(f))return a(e),null;for(;t(f);)i+=f,n()}return i}function o(){var r="";for(e();f&&" "!=f&&"	"!=f;)r+=f,n();return r||null}var s,u,f;w.parse=function(r){if(s=r,u=-1,f="",!x(s))return null;n(),e();var t,a=i();return a?(t=o(),n(),e(),f?null:a&&t?new w(Number(a),t):null):(t=o(),n(),e(),f?null:new w(null,t))}}(),w.prototype.clone=function(){var e=new w;for(var r in this)this.hasOwnProperty(r)&&(e[r]=this[r]);return e},w.prototype._normalize=function(e){return(e+this.unit.offset)*this.unit.value*this.prefix.value},w.prototype._unnormalize=function(e,r){return void 0==r?e/this.unit.value/this.prefix.value-this.unit.offset:e/this.unit.value/r-this.unit.offset},w.isPlainUnit=function(e){return null!=b(e)},w.prototype.hasBase=function(e){return void 0===this.unit.base?void 0===e:this.unit.base===e},w.prototype.equalBase=function(e){return this.unit.base===e.unit.base},w.prototype.equals=function(e){return this.equalBase(e)&&this.value==e.value},w.prototype["in"]=function(e){var r;if(x(e)){if(r=new w(null,e),!this.equalBase(r))throw new Error("Units do not match");return r.value=this.value,r}if(e instanceof w){if(!this.equalBase(e))throw new Error("Units do not match");if(null!=e.value)throw new Error("Cannot convert to a unit with a value");if(null==e.unit)throw new Error("Unit expected on the right hand side of function in");return r=e.clone(),r.value=this.value,r.fixPrefix=!0,r}throw new Error("String or Unit expected as parameter")},w.prototype.toNumber=function(e){var r=this["in"](e),t=this.fixPrefix?r._bestPrefix():r.prefix;return r._unnormalize(r.value,t.value)},w.prototype.toString=function(){var e,r;if(this.fixPrefix)e=this._unnormalize(this.value),r=null!=this.value?rr.formatNumber(e,er.options.precision)+" ":"",r+=this.prefix.name+this.unit.name;else{var t=this._bestPrefix();e=this._unnormalize(this.value,t.value),r=null!=this.value?rr.formatNumber(e,er.options.precision)+" ":"",r+=t.name+this.unit.name}return r},w.prototype._bestPrefix=function(){var e=Math.abs(this.value/this.unit.value),r=w.PREFIX_NONE,t=Math.abs(Math.log(e/r.value)/Math.LN10-1.2),n=this.unit.prefixes;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];if(i.scientific){var o=Math.abs(Math.log(e/i.value)/Math.LN10-1.2);t>o&&(r=i,t=o)}}return r},w.PREFIXES={NONE:{"":{name:"",value:1,scientific:!0}},SHORT:{"":{name:"",value:1,scientific:!0},da:{name:"da",value:10,scientific:!1},h:{name:"h",value:100,scientific:!1},k:{name:"k",value:1e3,scientific:!0},M:{name:"M",value:1e6,scientific:!0},G:{name:"G",value:1e9,scientific:!0},T:{name:"T",value:1e12,scientific:!0},P:{name:"P",value:1e15,scientific:!0},E:{name:"E",value:1e18,scientific:!0},Z:{name:"Z",value:1e21,scientific:!0},Y:{name:"Y",value:1e24,scientific:!0},d:{name:"d",value:.1,scientific:!1},c:{name:"c",value:.01,scientific:!1},m:{name:"m",value:.001,scientific:!0},u:{name:"u",value:1e-6,scientific:!0},n:{name:"n",value:1e-9,scientific:!0},p:{name:"p",value:1e-12,scientific:!0},f:{name:"f",value:1e-15,scientific:!0},a:{name:"a",value:1e-18,scientific:!0},z:{name:"z",value:1e-21,scientific:!0},y:{name:"y",value:1e-24,scientific:!0}},LONG:{"":{name:"",value:1,scientific:!0},deca:{name:"deca",value:10,scientific:!1},hecto:{name:"hecto",value:100,scientific:!1},kilo:{name:"kilo",value:1e3,scientific:!0},mega:{name:"mega",value:1e6,scientific:!0},giga:{name:"giga",value:1e9,scientific:!0},tera:{name:"tera",value:1e12,scientific:!0},peta:{name:"peta",value:1e15,scientific:!0},exa:{name:"exa",value:1e18,scientific:!0},zetta:{name:"zetta",value:1e21,scientific:!0},yotta:{name:"yotta",value:1e24,scientific:!0},deci:{name:"deci",value:.1,scientific:!1},centi:{name:"centi",value:.01,scientific:!1},milli:{name:"milli",value:.001,scientific:!0},micro:{name:"micro",value:1e-6,scientific:!0},nano:{name:"nano",value:1e-9,scientific:!0},pico:{name:"pico",value:1e-12,scientific:!0},femto:{name:"femto",value:1e-15,scientific:!0},atto:{name:"atto",value:1e-18,scientific:!0},zepto:{name:"zepto",value:1e-21,scientific:!0},yocto:{name:"yocto",value:1e-24,scientific:!0}},BINARY_SHORT:{"":{name:"",value:1,scientific:!0},k:{name:"k",value:1024,scientific:!0},M:{name:"M",value:Math.pow(1024,2),scientific:!0},G:{name:"G",value:Math.pow(1024,3),scientific:!0},T:{name:"T",value:Math.pow(1024,4),scientific:!0},P:{name:"P",value:Math.pow(1024,5),scientific:!0},E:{name:"E",value:Math.pow(1024,6),scientific:!0},Z:{name:"Z",value:Math.pow(1024,7),scientific:!0},Y:{name:"Y",value:Math.pow(1024,8),scientific:!0},Ki:{name:"Ki",value:1024,scientific:!0},Mi:{name:"Mi",value:Math.pow(1024,2),scientific:!0},Gi:{name:"Gi",value:Math.pow(1024,3),scientific:!0},Ti:{name:"Ti",value:Math.pow(1024,4),scientific:!0},Pi:{name:"Pi",value:Math.pow(1024,5),scientific:!0},Ei:{name:"Ei",value:Math.pow(1024,6),scientific:!0},Zi:{name:"Zi",value:Math.pow(1024,7),scientific:!0},Yi:{name:"Yi",value:Math.pow(1024,8),scientific:!0}},BINARY_LONG:{"":{name:"",value:1,scientific:!0},kilo:{name:"kilo",value:1024,scientific:!0},mega:{name:"mega",value:Math.pow(1024,2),scientific:!0},giga:{name:"giga",value:Math.pow(1024,3),scientific:!0},tera:{name:"tera",value:Math.pow(1024,4),scientific:!0},peta:{name:"peta",value:Math.pow(1024,5),scientific:!0},exa:{name:"exa",value:Math.pow(1024,6),scientific:!0},zetta:{name:"zetta",value:Math.pow(1024,7),scientific:!0},yotta:{name:"yotta",value:Math.pow(1024,8),scientific:!0},kibi:{name:"kibi",value:1024,scientific:!0},mebi:{name:"mebi",value:Math.pow(1024,2),scientific:!0},gibi:{name:"gibi",value:Math.pow(1024,3),scientific:!0},tebi:{name:"tebi",value:Math.pow(1024,4),scientific:!0},pebi:{name:"pebi",value:Math.pow(1024,5),scientific:!0},exi:{name:"exi",value:Math.pow(1024,6),scientific:!0},zebi:{name:"zebi",value:Math.pow(1024,7),scientific:!0},yobi:{name:"yobi",value:Math.pow(1024,8),scientific:!0}}},w.PREFIX_NONE={name:"",value:1,scientific:!0},w.BASE_UNITS={NONE:{},LENGTH:{},MASS:{},TIME:{},CURRENT:{},TEMPERATURE:{},LUMINOUS_INTENSITY:{},AMOUNT_OF_SUBSTANCE:{},FORCE:{},SURFACE:{},VOLUME:{},ANGLE:{},BIT:{}};var tr=w.BASE_UNITS,nr=w.PREFIXES;w.BASE_UNIT_NONE={},w.UNIT_NONE={name:"",base:w.BASE_UNIT_NONE,value:1,offset:0},w.UNITS=[{name:"meter",base:tr.LENGTH,prefixes:nr.LONG,value:1,offset:0},{name:"inch",base:tr.LENGTH,prefixes:nr.NONE,value:.0254,offset:0},{name:"foot",base:tr.LENGTH,prefixes:nr.NONE,value:.3048,offset:0},{name:"yard",base:tr.LENGTH,prefixes:nr.NONE,value:.9144,offset:0},{name:"mile",base:tr.LENGTH,prefixes:nr.NONE,value:1609.344,offset:0},{name:"link",base:tr.LENGTH,prefixes:nr.NONE,value:.201168,offset:0},{name:"rod",base:tr.LENGTH,prefixes:nr.NONE,value:5.02921,offset:0},{name:"chain",base:tr.LENGTH,prefixes:nr.NONE,value:20.1168,offset:0},{name:"angstrom",base:tr.LENGTH,prefixes:nr.NONE,value:1e-10,offset:0},{name:"m",base:tr.LENGTH,prefixes:nr.SHORT,value:1,offset:0},{name:"ft",base:tr.LENGTH,prefixes:nr.NONE,value:.3048,offset:0},{name:"yd",base:tr.LENGTH,prefixes:nr.NONE,value:.9144,offset:0},{name:"mi",base:tr.LENGTH,prefixes:nr.NONE,value:1609.344,offset:0},{name:"li",base:tr.LENGTH,prefixes:nr.NONE,value:.201168,offset:0},{name:"rd",base:tr.LENGTH,prefixes:nr.NONE,value:5.02921,offset:0},{name:"ch",base:tr.LENGTH,prefixes:nr.NONE,value:20.1168,offset:0},{name:"mil",base:tr.LENGTH,prefixes:nr.NONE,value:254e-7,offset:0},{name:"m2",base:tr.SURFACE,prefixes:nr.SHORT,value:1,offset:0},{name:"sqin",base:tr.SURFACE,prefixes:nr.NONE,value:64516e-8,offset:0},{name:"sqft",base:tr.SURFACE,prefixes:nr.NONE,value:.09290304,offset:0},{name:"sqyd",base:tr.SURFACE,prefixes:nr.NONE,value:.83612736,offset:0},{name:"sqmi",base:tr.SURFACE,prefixes:nr.NONE,value:2589988.110336,offset:0},{name:"sqrd",base:tr.SURFACE,prefixes:nr.NONE,value:25.29295,offset:0},{name:"sqch",base:tr.SURFACE,prefixes:nr.NONE,value:404.6873,offset:0},{name:"sqmil",base:tr.SURFACE,prefixes:nr.NONE,value:6.4516e-10,offset:0},{name:"m3",base:tr.VOLUME,prefixes:nr.SHORT,value:1,offset:0},{name:"L",base:tr.VOLUME,prefixes:nr.SHORT,value:.001,offset:0},{name:"litre",base:tr.VOLUME,prefixes:nr.LONG,value:.001,offset:0},{name:"cuin",base:tr.VOLUME,prefixes:nr.NONE,value:16387064e-12,offset:0},{name:"cuft",base:tr.VOLUME,prefixes:nr.NONE,value:.028316846592,offset:0},{name:"cuyd",base:tr.VOLUME,prefixes:nr.NONE,value:.764554857984,offset:0},{name:"teaspoon",base:tr.VOLUME,prefixes:nr.NONE,value:5e-6,offset:0},{name:"tablespoon",base:tr.VOLUME,prefixes:nr.NONE,value:15e-6,offset:0},{name:"minim",base:tr.VOLUME,prefixes:nr.NONE,value:6.161152e-8,offset:0},{name:"fluiddram",base:tr.VOLUME,prefixes:nr.NONE,value:36966911e-13,offset:0},{name:"fluidounce",base:tr.VOLUME,prefixes:nr.NONE,value:2957353e-11,offset:0},{name:"gill",base:tr.VOLUME,prefixes:nr.NONE,value:.0001182941,offset:0},{name:"cup",base:tr.VOLUME,prefixes:nr.NONE,value:.0002365882,offset:0},{name:"pint",base:tr.VOLUME,prefixes:nr.NONE,value:.0004731765,offset:0},{name:"quart",base:tr.VOLUME,prefixes:nr.NONE,value:.0009463529,offset:0},{name:"gallon",base:tr.VOLUME,prefixes:nr.NONE,value:.003785412,offset:0},{name:"beerbarrel",base:tr.VOLUME,prefixes:nr.NONE,value:.1173478,offset:0},{name:"oilbarrel",base:tr.VOLUME,prefixes:nr.NONE,value:.1589873,offset:0},{name:"hogshead",base:tr.VOLUME,prefixes:nr.NONE,value:.238481,offset:0},{name:"fldr",base:tr.VOLUME,prefixes:nr.NONE,value:36966911e-13,offset:0},{name:"floz",base:tr.VOLUME,prefixes:nr.NONE,value:2957353e-11,offset:0},{name:"gi",base:tr.VOLUME,prefixes:nr.NONE,value:.0001182941,offset:0},{name:"cp",base:tr.VOLUME,prefixes:nr.NONE,value:.0002365882,offset:0},{name:"pt",base:tr.VOLUME,prefixes:nr.NONE,value:.0004731765,offset:0},{name:"qt",base:tr.VOLUME,prefixes:nr.NONE,value:.0009463529,offset:0},{name:"gal",base:tr.VOLUME,prefixes:nr.NONE,value:.003785412,offset:0},{name:"bbl",base:tr.VOLUME,prefixes:nr.NONE,value:.1173478,offset:0},{name:"obl",base:tr.VOLUME,prefixes:nr.NONE,value:.1589873,offset:0},{name:"g",base:tr.MASS,prefixes:nr.SHORT,value:.001,offset:0},{name:"gram",base:tr.MASS,prefixes:nr.LONG,value:.001,offset:0},{name:"ton",base:tr.MASS,prefixes:nr.SHORT,value:907.18474,offset:0},{name:"tonne",base:tr.MASS,prefixes:nr.SHORT,value:1e3,offset:0},{name:"grain",base:tr.MASS,prefixes:nr.NONE,value:6479891e-11,offset:0},{name:"dram",base:tr.MASS,prefixes:nr.NONE,value:.0017718451953125,offset:0},{name:"ounce",base:tr.MASS,prefixes:nr.NONE,value:.028349523125,offset:0},{name:"poundmass",base:tr.MASS,prefixes:nr.NONE,value:.45359237,offset:0},{name:"hundredweight",base:tr.MASS,prefixes:nr.NONE,value:45.359237,offset:0},{name:"stick",base:tr.MASS,prefixes:nr.NONE,value:.115,offset:0},{name:"gr",base:tr.MASS,prefixes:nr.NONE,value:6479891e-11,offset:0},{name:"dr",base:tr.MASS,prefixes:nr.NONE,value:.0017718451953125,offset:0},{name:"oz",base:tr.MASS,prefixes:nr.NONE,value:.028349523125,offset:0},{name:"lbm",base:tr.MASS,prefixes:nr.NONE,value:.45359237,offset:0},{name:"cwt",base:tr.MASS,prefixes:nr.NONE,value:45.359237,offset:0},{name:"s",base:tr.TIME,prefixes:nr.SHORT,value:1,offset:0},{name:"min",base:tr.TIME,prefixes:nr.NONE,value:60,offset:0},{name:"h",base:tr.TIME,prefixes:nr.NONE,value:3600,offset:0},{name:"seconds",base:tr.TIME,prefixes:nr.LONG,value:1,offset:0},{name:"second",base:tr.TIME,prefixes:nr.LONG,value:1,offset:0},{name:"sec",base:tr.TIME,prefixes:nr.LONG,value:1,offset:0},{name:"minutes",base:tr.TIME,prefixes:nr.NONE,value:60,offset:0},{name:"minute",base:tr.TIME,prefixes:nr.NONE,value:60,offset:0},{name:"hours",base:tr.TIME,prefixes:nr.NONE,value:3600,offset:0},{name:"hour",base:tr.TIME,prefixes:nr.NONE,value:3600,offset:0},{name:"day",base:tr.TIME,prefixes:nr.NONE,value:86400,offset:0},{name:"days",base:tr.TIME,prefixes:nr.NONE,value:86400,offset:0},{name:"rad",base:tr.ANGLE,prefixes:nr.NONE,value:1,offset:0},{name:"deg",base:tr.ANGLE,prefixes:nr.NONE,value:.017453292519943295,offset:0},{name:"grad",base:tr.ANGLE,prefixes:nr.NONE,value:.015707963267948967,offset:0},{name:"cycle",base:tr.ANGLE,prefixes:nr.NONE,value:6.283185307179586,offset:0},{name:"A",base:tr.CURRENT,prefixes:nr.SHORT,value:1,offset:0},{name:"ampere",base:tr.CURRENT,prefixes:nr.LONG,value:1,offset:0},{name:"K",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1,offset:0},{name:"degC",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1,offset:273.15},{name:"degF",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1/1.8,offset:459.67},{name:"degR",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1/1.8,offset:0},{name:"kelvin",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1,offset:0},{name:"celsius",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1,offset:273.15},{name:"fahrenheit",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1/1.8,offset:459.67},{name:"rankine",base:tr.TEMPERATURE,prefixes:nr.NONE,value:1/1.8,offset:0},{name:"mol",base:tr.AMOUNT_OF_SUBSTANCE,prefixes:nr.NONE,value:1,offset:0},{name:"mole",base:tr.AMOUNT_OF_SUBSTANCE,prefixes:nr.NONE,value:1,offset:0},{name:"cd",base:tr.LUMINOUS_INTENSITY,prefixes:nr.NONE,value:1,offset:0},{name:"candela",base:tr.LUMINOUS_INTENSITY,prefixes:nr.NONE,value:1,offset:0},{name:"N",base:tr.FORCE,prefixes:nr.SHORT,value:1,offset:0},{name:"newton",base:tr.FORCE,prefixes:nr.LONG,value:1,offset:0},{name:"lbf",base:tr.FORCE,prefixes:nr.NONE,value:4.4482216152605,offset:0},{name:"poundforce",base:tr.FORCE,prefixes:nr.NONE,value:4.4482216152605,offset:0},{name:"b",base:tr.BIT,prefixes:nr.BINARY_SHORT,value:1,offset:0},{name:"bits",base:tr.BIT,prefixes:nr.BINARY_LONG,value:1,offset:0},{name:"B",base:tr.BIT,prefixes:nr.BINARY_SHORT,value:8,offset:0},{name:"bytes",base:tr.BIT,prefixes:nr.BINARY_LONG,value:8,offset:0}],er.pi=Math.PI,er.e=Math.E,er.tau=2*Math.PI,er.i=new r(0,1),er.Infinity=1/0,er.NaN=0/0,er["true"]=!0,er["false"]=!1,er.E=Math.E,er.LN2=Math.LN2,er.LN10=Math.LN10,er.LOG2E=Math.LOG2E,er.LOG10E=Math.LOG10E,er.PI=Math.PI,er.SQRT1_2=Math.SQRT1_2,er.SQRT2=Math.SQRT2,er.expr.node.Node=A,A.prototype.eval=function(){throw new Error("Cannot evaluate a Node interface")
},A.prototype.find=function(e){return this.match(e)?[this]:[]},A.prototype.match=function(e){var r=!0;if(e&&(!e.type||this instanceof e.type||(r=!1),r&&e.properties))for(var t in e.properties)if(e.properties.hasOwnProperty(t)&&this[t]!=e.properties[t]){r=!1;break}return r},A.prototype.toString=function(){return""},N.prototype=new A,er.expr.node.ConstantNode=N,N.prototype.eval=function(){return this.value},N.prototype.toString=function(){return er.format(this.value)},M.prototype=new A,er.expr.node.OperatorNode=M,M.prototype.eval=function(){return this.fn.apply(this,this.params.map(function(e){return e.eval()}))},M.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);var t=this.params;if(t)for(var n=0,a=t.length;a>n;n++)r=r.concat(t[n].find(e));return r},M.prototype.toString=function(){var e=this.params;if(this.fn===er.unary)return"-"+e[0].toString();switch(e.length){case 1:return e[0].toString()+this.name;case 2:var r=e[0].toString();e[0]instanceof M&&(r="("+r+")");var t=e[1].toString();return e[1]instanceof M&&(t="("+t+")"),r+" "+this.name+" "+t;default:return this.name+"("+this.params.join(", ")+")"}},S.prototype=new A,er.expr.node.SymbolNode=S,S.prototype.eval=function(){var e=this.scope.get(this.name);if(void 0===e)throw new Error("Undefined symbol "+this.name);return e},S.prototype.toString=function(){return this.name},T.prototype=new A,er.expr.node.ParamsNode=T,T.prototype.eval=function(){var e,r,t=this.object;if(void 0==t)throw new Error("Node undefined");var n=t.eval();if(this.hasContextParams){var a,i=this.paramScopes;if(a=n.size?n.size():void 0!==n.length?[n.length]:[],i&&a)for(e=0,r=this.params.length;r>e;e++){var o=i[e];o&&o.set("end",a[e]-1)}}var s=this.params,u=[];for(e=0,r=this.params.length;r>e;e++)u[e]=s[e].eval();return"function"==typeof n?n.apply(this,u):er.subset(n,u)},T.prototype.find=function(e){var r=[];this.match(e)&&r.push(this),this.object&&(r=r.concat(this.object.find(e)));var t=this.params;if(t)for(var n=0,a=t.length;a>n;n++)r=r.concat(t[n].find(e));return r},T.prototype.toString=function(){var e=this.object?this.object.toString():"";return this.params&&(e+="("+this.params.join(", ")+")"),e},q.prototype=new A,er.expr.node.MatrixNode=q,function(){function e(e){for(var r=[],t=e.length,a=0;t>a;a++){for(var i=e[a],o=i.length,s=null,u=null,f=0;o>f;f++){var l,c=er.clone(i[f]);if(c instanceof n){if(l=c.size(),c=c.valueOf(),1==l.length)c=[c],l=[1,l[0]];else if(l.length>2)throw new Error("Cannot merge a multi dimensional matrix")}else c instanceof d?(c=[c.valueOf()],l=[1,c[0].length]):Array.isArray(c)?(l=[1,c.length],c=[c]):(l=[1,1],c=[[c]]);if(null==s)s=c,u=l[0];else{if(l[0]!=u)throw new Error("Dimension mismatch ("+l[0]+" != "+u+")");for(var m=0;u>m;m++)s[m]=s[m].concat(c[m])}}r=r.concat(s)}return r}q.prototype.eval=function(){for(var r=this.nodes,t=[],a=!1,i=0,o=r.length;o>i;i++){for(var s=r[i],u=[],f=0,l=s.length;l>f;f++){var c=s[f].eval();(c instanceof n||c instanceof d||Array.isArray(c))&&(a=!0),u[f]=c}t[i]=u}return a&&(t=e(t)),new n(t)},q.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);for(var t=this.nodes,n=0,a=t.length;a>n;n++)for(var i=t[n],o=0,s=i.length;s>o;o++)r=r.concat(i[o].find(e));return r},q.prototype.toString=function(){return rr.formatArray(this.nodes)}}(),z.prototype=new A,er.expr.node.BlockNode=z,z.prototype.add=function(e,r){var t=this.params.length;this.params[t]=e,this.visible[t]=void 0!=r?r:!0},z.prototype.eval=function(){for(var e=[],r=0,t=this.params.length;t>r;r++){var n=this.params[r].eval();this.visible[r]&&e.push(n)}return e},z.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);var t=this.params;if(t)for(var n=0,a=t.length;a>n;n++)r=r.concat(t[n].find(e));return r},z.prototype.toString=function(){for(var e=[],r=0,t=this.params.length;t>r;r++)this.visible[r]&&e.push("\n  "+this.params[r].toString());return"["+e.join(",")+"\n]"},R.prototype=new A,er.expr.node.AssignmentNode=R,R.prototype.eval=function(){if(void 0===this.expr)throw new Error("Undefined symbol "+this.name);var e=this.expr.eval();return this.scope.set(this.name,e),e},R.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),this.expr&&(r=r.concat(this.expr.find(e))),r},R.prototype.toString=function(){return this.name+" = "+this.expr.toString()},C.prototype=new A,er.expr.node.UpdateNode=C,C.prototype.eval=function(){if(void 0===this.expr)throw new Error("Undefined symbol "+this.name);var e;this.params;var r=this.scope.get(this.name);if(void 0==r)throw new Error("Undefined symbol "+this.name);if(this.hasContextParams){var t,n=this.paramScopes;if(t=r.size?r.size():void 0!==r.length?[r.length]:[],n&&t)for(var a=0,i=this.params.length;i>a;a++){var o=n[a];o&&o.set("end",t[a]-1)}}var s=[];this.params.forEach(function(e){s.push(e.eval())});var u=this.expr.eval();return e=er.subset(r,s,u),this.scope.set(this.name,e),e},C.prototype.find=function(e){var r=[];this.match(e)&&r.push(this);var t=this.params;if(t)for(var n=0,a=t.length;a>n;n++)r=r.concat(t[n].find(e));return this.expr&&(r=r.concat(this.expr.find(e))),r},C.prototype.toString=function(){var e="";return e+=this.name,this.params&&this.params.length&&(e+="("+this.params.join(", ")+")"),e+=" = ",e+=this.expr.toString()},U.prototype=new A,er.expr.node.FunctionNode=U,U.prototype.eval=function(){return this.scope.set(this.name,this.fn),this.fn},U.prototype.find=function(e){var r=[];return this.match(e)&&r.push(this),this.expr&&(r=r.concat(this.expr.find(e))),r},U.prototype.toString=function(){return this.fn.toString()},er.expr.Scope=function(){if(this.parentScope=null,this.subScopes=null,this.symbols={},this.cache={},arguments.length>0){var e=arguments[0];e instanceof er.expr.Scope?this.parentScope=e:e instanceof Object&&(this.symbols=e)}if(arguments.length>1){var r=arguments[1];r instanceof Object&&(this.symbols=r)}},er.expr.Scope.prototype={createSubScope:function(){var e=new er.expr.Scope(this);return this.subScopes||(this.subScopes=[]),this.subScopes.push(e),e},get:function(e){var r;if(r=this.symbols[e],void 0!==r)return r;var t=this.cache[e];if(t)return t[e];for(var n=this.parentScope;n;){if(r=n.symbols[e],void 0!==r)return this.cache[e]=n.symbols,r;n=n.parentScope}return r=er[e],void 0!==r?(this.cache[e]=er,r):w.isPlainUnit(e)?(r=new w(null,e),this.cache[e]={},this.cache[e][e]=r,r):void 0},has:function(e){return void 0!==this.symbols[e]},set:function(e,r){return this.symbols[e]=r},remove:function(e){delete this.symbols[e]},clear:function(){var e=this.symbols;for(var r in e)e.hasOwnProperty(r)&&delete e[r];if(this.subScopes)for(var t=this.subScopes,n=0,a=t.length;a>n;n++)t[n].clear();this.clearCache()},clearCache:function(){this.cache={}}},er.expr.Parser=function(){if(!(this instanceof er.expr.Parser))throw new SyntaxError("Parser constructor must be called with the new operator");this.scope=new er.expr.Scope},er.expr.Parser.prototype.parse=function(e){return er.parse(e,this.scope)},er.expr.Parser.prototype.eval=function(e){var r=er.parse(e,this.scope);return r.eval()},er.expr.Parser.prototype.get=function(e){return this.scope.get(e)},er.expr.Parser.prototype.set=function(e,r){this.scope.set(e,r)},er.expr.Parser.prototype.remove=function(e){this.scope.remove(e)},er.expr.Parser.prototype.clear=function(){this.scope.clear()},er.abs=function(e){if(1!=arguments.length)throw O("abs",arguments.length,1);if(g(e))return Math.abs(e);if(e instanceof r)return Math.sqrt(e.re*e.re+e.im*e.im);if(Array.isArray(e)||e instanceof n)return rr.map(e,er.abs);if(e.valueOf()!==e)return er.abs(e.valueOf());throw E("abs",e)},er.add=function(e,t){if(2!=arguments.length)throw O("add",arguments.length,2);if(g(e)){if(g(t))return e+t;if(t instanceof r)return r.create(e+t.re,t.im)}else if(e instanceof r){if(g(t))return r.create(e.re+t,e.im);if(t instanceof r)return r.create(e.re+t.re,e.im+t.im)}else if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Units do not match");if(null==e.value)throw new Error("Unit on left hand side of operator + has an undefined value");if(null==t.value)throw new Error("Unit on right hand side of operator + has an undefined value");var a=e.clone();return a.value+=t.value,a.fixPrefix=!1,a}if(x(e)||x(t))return e+t;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.add);if(e.valueOf()!==e||t.valueOf()!==t)return er.add(e.valueOf(),t.valueOf());throw E("add",e,t)},er.ceil=function(e){if(1!=arguments.length)throw O("ceil",arguments.length,1);if(g(e))return Math.ceil(e);if(e instanceof r)return r.create(Math.ceil(e.re),Math.ceil(e.im));if(Array.isArray(e)||e instanceof n)return rr.map(e,er.ceil);if(e.valueOf()!==e)return er.ceil(e.valueOf());throw E("ceil",e)},er.cube=function(e){if(1!=arguments.length)throw O("cube",arguments.length,1);if(g(e))return e*e*e;if(e instanceof r)return er.multiply(er.multiply(e,e),e);if(Array.isArray(e)||e instanceof n)return rr.map(e,er.cube);if(e.valueOf()!==e)return er.cube(e.valueOf());throw E("cube",e)},er.divide=function(e,t){if(2!=arguments.length)throw O("divide",arguments.length,2);if(g(e)){if(g(t))return e/t;if(t instanceof r)return L(new r(e,0),t)}if(e instanceof r){if(g(t))return L(e,new r(t,0));if(t instanceof r)return L(e,t)}if(e instanceof w&&g(t)){var a=e.clone();return a.value/=t,a}if(Array.isArray(e)||e instanceof n)return Array.isArray(t)||t instanceof n?er.multiply(e,er.inv(t)):rr.map2(e,t,er.divide);if(Array.isArray(t)||t instanceof n)return er.multiply(e,er.inv(t));if(e.valueOf()!==e||t.valueOf()!==t)return er.divide(e.valueOf(),t.valueOf());throw E("divide",e,t)},er.edivide=function(e,r){if(2!=arguments.length)throw O("edivide",arguments.length,2);return rr.deepMap2(e,r,er.divide)},er.emultiply=function(e,r){if(2!=arguments.length)throw O("emultiply",arguments.length,2);return rr.deepMap2(e,r,er.multiply)},er.epow=function(e,r){if(2!=arguments.length)throw O("epow",arguments.length,2);return rr.deepMap2(e,r,er.pow)},er.equal=function sr(e,t){if(2!=arguments.length)throw O("equal",arguments.length,2);if(g(e)){if(g(t))return e==t;if(t instanceof r)return e==t.re&&0==t.im}if(e instanceof r){if(g(t))return e.re==t&&0==e.im;if(t instanceof r)return e.re==t.re&&e.im==t.im}if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return e.value==t.value}if(x(e)||x(t))return e==t;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.equal);if(e.valueOf()!==e||t.valueOf()!==t)return sr(e.valueOf(),t.valueOf());throw E("equal",e,t)},er.exp=function(e){if(1!=arguments.length)throw O("exp",arguments.length,1);if(g(e))return Math.exp(e);if(e instanceof r){var t=Math.exp(e.re);return r.create(t*Math.cos(e.im),t*Math.sin(e.im))}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.exp);if(e.valueOf()!==e)return er.exp(e.valueOf());throw E("exp",e)},er.fix=function(e){if(1!=arguments.length)throw O("fix",arguments.length,1);if(g(e))return e>0?Math.floor(e):Math.ceil(e);if(e instanceof r)return r.create(e.re>0?Math.floor(e.re):Math.ceil(e.re),e.im>0?Math.floor(e.im):Math.ceil(e.im));if(Array.isArray(e)||e instanceof n)return rr.map(e,er.fix);if(e.valueOf()!==e)return er.fix(e.valueOf());throw E("fix",e)},er.floor=function(e){if(1!=arguments.length)throw O("floor",arguments.length,1);if(g(e))return Math.floor(e);if(e instanceof r)return r.create(Math.floor(e.re),Math.floor(e.im));if(Array.isArray(e)||e instanceof n)return rr.map(e,er.floor);if(e.valueOf()!==e)return er.floor(e.valueOf());throw E("floor",e)},er.gcd=function(){var e,r=arguments[0],t=arguments[1];if(2==arguments.length){if(g(r)&&g(t)){if(!v(r)||!v(t))throw new Error("Parameters in function gcd must be integer numbers");for(;0!=t;)e=t,t=r%e,r=e;return Math.abs(r)}if(Array.isArray(r)||r instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(r,t,er.gcd);if(r.valueOf()!==r||t.valueOf()!==t)return er.gcd(r.valueOf(),t.valueOf());throw E("gcd",r,t)}if(arguments.length>2){for(var a=1;a<arguments.length;a++)r=er.gcd(r,arguments[a]);return r}throw new SyntaxError("Function gcd expects two or more arguments")},er.larger=function(e,t){if(2!=arguments.length)throw O("larger",arguments.length,2);if(g(e)){if(g(t))return e>t;if(t instanceof r)return e>er.abs(t)}if(e instanceof r){if(g(t))return er.abs(e)>t;if(t instanceof r)return er.abs(e)>er.abs(t)}if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return e.value>t.value}if(x(e)||x(t))return e>t;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.larger);if(e.valueOf()!==e||t.valueOf()!==t)return er.larger(e.valueOf(),t.valueOf());throw E("larger",e,t)},er.largereq=function(e,t){if(2!=arguments.length)throw O("largereq",arguments.length,2);if(g(e)){if(g(t))return e>=t;if(t instanceof r)return e>=er.abs(t)}if(e instanceof r){if(g(t))return er.abs(e)>=t;if(t instanceof r)return er.abs(e)>=er.abs(t)}if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return e.value>=t.value}if(x(e)||x(t))return e>=t;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.largereq);if(e.valueOf()!==e||t.valueOf()!==t)return er.largereq(e.valueOf(),t.valueOf());throw E("largereq",e,t)},er.lcm=function(){var e,r=arguments[0],t=arguments[1];if(2==arguments.length){if(g(r)&&g(t)){if(!v(r)||!v(t))throw new Error("Parameters in function lcm must be integer numbers");for(var a=r*t;0!=t;)e=t,t=r%e,r=e;return Math.abs(a/r)}if(Array.isArray(r)||r instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(r,t,er.lcm);if(r.valueOf()!==r||t.valueOf()!==t)return er.lcm(r.valueOf(),t.valueOf());throw E("lcm",r,t)}if(arguments.length>2){for(var i=1;i<arguments.length;i++)r=er.lcm(r,arguments[i]);return r}throw new SyntaxError("Function lcm expects two or more arguments")},er.log=function(e,t){if(1==arguments.length){if(g(e))return e>=0?Math.log(e):er.log(new r(e,0));if(e instanceof r)return r.create(Math.log(Math.sqrt(e.re*e.re+e.im*e.im)),Math.atan2(e.im,e.re));if(Array.isArray(e)||e instanceof n)return rr.map(e,er.log);if(e.valueOf()!==e)return er.log(e.valueOf());throw E("log",e)}if(2==arguments.length)return er.divide(er.log(e),er.log(t));throw O("log",arguments.length,1,2)},er.log10=function(e){if(1!=arguments.length)throw O("log10",arguments.length,1);if(g(e))return e>=0?Math.log(e)/Math.LN10:er.log10(new r(e,0));if(e instanceof r)return r.create(Math.log(Math.sqrt(e.re*e.re+e.im*e.im))/Math.LN10,Math.atan2(e.im,e.re)/Math.LN10);if(Array.isArray(e)||e instanceof n)return rr.map(e,er.log10);if(e.valueOf()!==e)return er.log10(e.valueOf());throw E("log10",e)},er.mod=function(e,r){if(2!=arguments.length)throw O("mod",arguments.length,2);if(g(e)&&g(r))return I(e,r);if(Array.isArray(e)||e instanceof n||Array.isArray(r)||r instanceof n)return rr.map2(e,r,er.mod);if(e.valueOf()!==e||r.valueOf()!==r)return er.mod(e.valueOf(),r.valueOf());throw E("mod",e,r)},er.multiply=function ur(e,t){if(2!=arguments.length)throw O("multiply",arguments.length,2);if(g(e)){if(g(t))return e*t;if(t instanceof r)return _(new r(e,0),t);if(t instanceof w)return o=t.clone(),o.value*=e,o}else if(e instanceof r){if(g(t))return _(e,new r(t,0));if(t instanceof r)return _(e,t)}else if(e instanceof w){if(g(t))return o=e.clone(),o.value*=t,o}else{if(Array.isArray(e)){if(Array.isArray(t)){var a=rr.size(e),i=rr.size(t);if(2!=a.length)throw new Error("Can only multiply a 2 dimensional matrix (A has "+a.length+" dimensions)");if(2!=i.length)throw new Error("Can only multiply a 2 dimensional matrix (B has "+i.length+" dimensions)");if(a[1]!=i[0])throw new RangeError("Dimensions mismatch in multiplication. Columns of A must match rows of B (A is "+a[0]+"x"+a[1]+", B is "+i[0]+"x"+i[1]+", "+i[1]+" != "+i[0]+")");for(var o=[],s=a[0],u=i[1],f=a[1],ur=er.multiply,l=er.add,c=0;s>c;c++){o[c]=[];for(var m=0;u>m;m++){for(var h=null,p=0;f>p;p++){var v=ur(e[c][p],t[p][m]);h=null==h?v:l(h,v)}o[c][m]=h}}return o}return t instanceof n?new n(er.multiply(e.valueOf(),t.valueOf())):rr.map2(e,t,er.multiply)}if(e instanceof n)return new n(er.multiply(e.valueOf(),t.valueOf()))}if(Array.isArray(t))return rr.map2(e,t,er.multiply);if(t instanceof n)return new n(er.multiply(e.valueOf(),t.valueOf()));if(e.valueOf()!==e||t.valueOf()!==t)return er.multiply(e.valueOf(),t.valueOf());throw E("multiply",e,t)},er.pow=function(e,t){if(2!=arguments.length)throw O("pow",arguments.length,2);if(g(e)){if(g(t))return v(t)||e>=0?Math.pow(e,t):P(new r(e,0),new r(t,0));if(t instanceof r)return P(new r(e,0),t)}else if(e instanceof r){if(g(t))return P(e,new r(t,0));if(t instanceof r)return P(e,t)}else{if(Array.isArray(e)){if(!g(t)||!v(t)||0>t)throw new TypeError("For A^b, b must be a positive integer (value is "+t+")");var a=rr.size(e);if(2!=a.length)throw new Error("For A^b, A must be 2 dimensional (A has "+a.length+" dimensions)");if(a[0]!=a[1])throw new Error("For A^b, A must be square (size is "+a[0]+"x"+a[1]+")");if(0==t)return er.eye(a[0]);for(var i=e,o=1;t>o;o++)i=er.multiply(e,i);return i}if(e instanceof n)return new n(er.pow(e.valueOf(),t))}if(e.valueOf()!==e||t.valueOf()!==t)return er.pow(e.valueOf(),t.valueOf());throw E("pow",e,t)},er.round=function(e,t){if(1!=arguments.length&&2!=arguments.length)throw O("round",arguments.length,1,2);if(void 0==t){if(g(e))return Math.round(e);if(e instanceof r)return r.create(Math.round(e.re),Math.round(e.im));if(Array.isArray(e)||e instanceof n)return rr.map(e,er.round);if(e.valueOf()!==e)return er.round(e.valueOf());throw E("round",e)}if(!g(t))throw new TypeError("Number of decimals in function round must be an integer");if(t!==Math.round(t))throw new TypeError("Number of decimals in function round must be integer");if(0>t||t>9)throw new Error("Number of decimals in function round must be in te range of 0-9");if(g(e))return B(e,t);if(e instanceof r)return r.create(B(e.re,t),B(e.im,t));if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.round);if(e.valueOf()!==e||t.valueOf()!==t)return er.round(e.valueOf(),t.valueOf());throw E("round",e,t)},er.sign=function fr(e){if(1!=arguments.length)throw O("sign",arguments.length,1);if(g(e)){var fr;return fr=e>0?1:0>e?-1:0}if(e instanceof r){var t=Math.sqrt(e.re*e.re+e.im*e.im);return r.create(e.re/t,e.im/t)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.sign);if(e.valueOf()!==e)return er.sign(e.valueOf());throw E("sign",e)},er.smaller=function(e,t){if(2!=arguments.length)throw O("smaller",arguments.length,2);if(g(e)){if(g(t))return t>e;if(t instanceof r)return e<er.abs(t)}if(e instanceof r){if(g(t))return er.abs(e)<t;if(t instanceof r)return er.abs(e)<er.abs(t)}if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return e.value<t.value}if(x(e)||x(t))return t>e;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.smaller);if(e.valueOf()!==e||t.valueOf()!==t)return er.smaller(e.valueOf(),t.valueOf());throw E("smaller",e,t)},er.smallereq=function(e,t){if(2!=arguments.length)throw O("smallereq",arguments.length,2);if(g(e)){if(g(t))return t>=e;if(t instanceof r)return e<=er.abs(t)}if(e instanceof r){if(g(t))return er.abs(e)<=t;if(t instanceof r)return er.abs(e)<=er.abs(t)}if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return e.value<=t.value}if(x(e)||x(t))return t>=e;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.smallereq);if(e.valueOf()!==e||t.valueOf()!==t)return er.smallereq(e.valueOf(),t.valueOf());throw E("smallereq",e,t)},er.sqrt=function(e){if(1!=arguments.length)throw O("sqrt",arguments.length,1);if(g(e))return e>=0?Math.sqrt(e):er.sqrt(new r(e,0));if(e instanceof r){var t=Math.sqrt(e.re*e.re+e.im*e.im);return e.im>=0?r.create(.5*Math.sqrt(2*(t+e.re)),.5*Math.sqrt(2*(t-e.re))):r.create(.5*Math.sqrt(2*(t+e.re)),-.5*Math.sqrt(2*(t-e.re)))}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.sqrt);if(e.valueOf()!==e)return er.sqrt(e.valueOf());throw E("sqrt",e)},er.square=function(e){if(1!=arguments.length)throw O("square",arguments.length,1);if(g(e))return e*e;if(e instanceof r)return er.multiply(e,e);if(Array.isArray(e)||e instanceof n)return rr.map(e,er.square);if(e.valueOf()!==e)return er.square(e.valueOf());throw E("square",e)},er.subtract=function(e,t){if(2!=arguments.length)throw O("subtract",arguments.length,2);if(g(e)){if(g(t))return e-t;if(t instanceof r)return r.create(e-t.re,-t.im)}else if(e instanceof r){if(g(t))return r.create(e.re-t,e.im);if(t instanceof r)return r.create(e.re-t.re,e.im-t.im)}else if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Units do not match");if(null==e.value)throw new Error("Unit on left hand side of operator - has an undefined value");if(null==t.value)throw new Error("Unit on right hand side of operator - has an undefined value");var a=e.clone();return a.value-=t.value,a.fixPrefix=!1,a}if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.subtract);if(e.valueOf()!==e||t.valueOf()!==t)return er.subtract(e.valueOf(),t.valueOf());throw E("subtract",e,t)},er.unary=function(e){if(1!=arguments.length)throw O("unary",arguments.length,1);if(g(e))return-e;if(e instanceof r)return r.create(-e.re,-e.im);if(e instanceof w){var t=e.clone();return t.value=-e.value,t}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.unary);if(e.valueOf()!==e)return er.unary(e.valueOf());throw E("unary",e)},er.unaryminus=function(){throw new Error("Function unaryminus is deprecated, use unary instead")},er.unequal=function(e,t){if(2!=arguments.length)throw O("unequal",arguments.length,2);if(g(e)){if(g(t))return e!=t;if(t instanceof r)return e!=t.re||0!=t.im}if(e instanceof r){if(g(t))return e.re!=t||0!=e.im;if(t instanceof r)return e.re!=t.re||e.im!=t.im}if(e instanceof w&&t instanceof w){if(!e.equalBase(t))throw new Error("Cannot compare units with different base");return e.value!=t.value}if(x(e)||x(t))return e!=t;if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.unequal);if(e.valueOf()!==e||t.valueOf()!==t)return er.unequal(e.valueOf(),t.valueOf());throw E("unequal",e,t)},er.xgcd=function lr(e,r){if(2==arguments.length){if(g(e)&&g(r)){if(!v(e)||!v(r))throw new Error("Parameters in function xgcd must be integer numbers");if(0==r)return[e,1,0];var t=lr(r,e%r),n=t[0],a=t[1],i=t[2];return[n,i,a-i*Math.floor(e/r)]}throw E("xgcd",e,r)}throw new SyntaxError("Function xgcd expects two arguments")},er.arg=function(e){if(1!=arguments.length)throw O("arg",arguments.length,1);return g(e)?Math.atan2(0,e):e instanceof r?Math.atan2(e.im,e.re):Array.isArray(e)||e instanceof n?rr.map(e,er.arg):e.valueOf()!==e?er.arg(e.valueOf()):er.atan2(0,e)},er.conj=function(e){if(1!=arguments.length)throw O("conj",arguments.length,1);return g(e)?e:e instanceof r?r.create(e.re,-e.im):Array.isArray(e)||e instanceof n?rr.map(e,er.conj):e.valueOf()!==e?er.conj(e.valueOf()):clone(e)},er.im=function(e){if(1!=arguments.length)throw O("im",arguments.length,1);return g(e)?0:e instanceof r?e.im:Array.isArray(e)||e instanceof n?rr.map(e,er.im):e.valueOf()!==e?er.im(e.valueOf()):0},er.re=function(e){if(1!=arguments.length)throw O("re",arguments.length,1);return g(e)?e:e instanceof r?e.re:Array.isArray(e)||e instanceof n?rr.map(e,er.re):e.valueOf()!==e?er.re(e.valueOf()):er.clone(e)},er["boolean"]=function(e){if(1!=arguments.length)throw O("boolean",arguments.length,0,1);if("true"===e||e===!0)return!0;if("false"===e||e===!1)return!1;if(g(e))return 0!==e;if(x(e)){var r=e.toLowerCase();if("true"===r)return!0;if("false"===r)return!1;var t=Number(e);if(""!=e&&!isNaN(t))return 0!==t}throw new SyntaxError(e.toString()+" is no valid boolean")},er.complex=function(){switch(arguments.length){case 0:return new r(0,0);case 1:var e=arguments[0];if(e instanceof r)return e.clone();if(x(e)){var t=r.parse(e);if(t)return t;throw new SyntaxError('String "'+e+'" is no valid complex number')}throw new TypeError("Two numbers or a single string expected in function complex");case 2:return new r(arguments[0],arguments[1]);default:throw O("complex",arguments.length,0,2)}},er.matrix=function(e){if(arguments.length>1)throw O("matrix",arguments.length,0,1);return new n(e)},er.number=function(e){switch(arguments.length){case 0:return 0;case 1:var r=Number(e);if(isNaN(r)&&(r=Number(e.valueOf())),isNaN(r))throw new SyntaxError(e.toString()+" is no valid number");return r;default:throw O("number",arguments.length,0,1)}},er.parser=function(){return new er.expr.Parser},er.range=function(e){switch(arguments.length){case 1:if(e instanceof d)return e.clone();if(x(e)){var r=d.parse(e);if(r)return r;throw new SyntaxError('String "'+r+'" is no valid range')}throw new TypeError("Two or three numbers or a single string expected in function range");case 2:return new d(arguments[0],null,arguments[1]);case 3:return new d(arguments[0],arguments[1],arguments[2]);default:throw O("range",arguments.length,2,3)}},er.string=function(e){switch(arguments.length){case 0:return"";case 1:return G(e);default:throw O("string",arguments.length,0,1)}},er.unit=function(){switch(arguments.length){case 1:var e=arguments[0];if(e instanceof w)return e.clone();if(x(e)){if(w.isPlainUnit(e))return new w(null,e);var r=w.parse(e);if(r)return r;throw new SyntaxError('String "'+e+'" is no valid unit')}throw new TypeError("A string or a number and string expected in function unit");case 2:return new w(arguments[0],arguments[1]);default:throw O("unit",arguments.length,1,2)}},er.workspace=function(){throw new Error("Workspace is no longer supported, sorry...")},er.concat=function(){var e,r,t=arguments.length,a=-1,i=!1,o=[];for(e=0;t>e;e++){var s=arguments[e];if(s instanceof n&&(i=!0),e==t-1&&g(s)){if(r=a,a=s,!v(a)||0>a)throw new TypeError("Dimension number must be a positive integer (dim = "+a+")");if(e>0&&a>r)throw new RangeError("Dimension out of range ("+a+" > "+r+")")}else{if(!(Array.isArray(s)||s instanceof n))throw E("concat",s);var u=er.clone(s).valueOf(),f=er.size(s).valueOf();if(o[e]=u,r=a,a=f.length-1,e>0&&a!=r)throw new RangeError("Dimension mismatch ("+r+" != "+a+")")}}if(0==o.length)throw new SyntaxError("At least one matrix expected");for(var l=o.shift();o.length;)l=j(l,o.shift(),a,0);return i?new n(l):l},er.det=function(e){if(1!=arguments.length)throw O("det",arguments.length,1);var r=er.size(e).valueOf();switch(r.length){case 0:return er.clone(e);case 1:if(1==r[0])return er.clone(e.valueOf()[0]);throw new RangeError("Matrix must be square (size: "+er.format(r)+")");case 2:var t=r[0],n=r[1];if(t==n)return k(e.valueOf(),t,n);throw new RangeError("Matrix must be square (size: "+er.format(r)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+er.format(r)+")")}},er.diag=function(e,r){var t,a,i,o;if(1!=arguments.length&&2!=arguments.length)throw O("diag",arguments.length,1,2);if(r){if(!g(r)||!v(r))throw new TypeError("Second parameter in function diag must be an integer")}else r=0;var s=r>0?r:0,u=0>r?-r:0;e instanceof n||e instanceof d||(e=new n(e));var f;switch(e.isVector()?(e=e.toVector(),f=[e.length]):f=e.size(),f.length){case 1:a=e.valueOf();var l=new n;for(l.resize([a.length+u,a.length+s]),t=l.valueOf(),o=a.length,i=0;o>i;i++)t[i+u][i+s]=er.clone(a[i]);return l;case 2:for(a=[],t=e.valueOf(),o=Math.min(f[0]-u,f[1]-s),i=0;o>i;i++)a[i]=er.clone(t[i+u][i+s]);return new n(a);default:throw new RangeError("Matrix for function diag must be 2 dimensional")}},er.eye=function(){var e=rr.argsToArray(arguments);if(0==e.length)e=[1,1];else if(1==e.length)e[1]=e[0];else if(e.length>2)throw O("eye",e.length,0,2);var r=e[0],t=e[1];if(!g(r)||!v(r)||1>r)throw new Error("Parameters in function eye must be positive integers");if(t&&(!g(t)||!v(t)||1>t))throw new Error("Parameters in function eye must be positive integers");var a=new n;a.resize(e);for(var i=er.min(e),o=a.valueOf(),s=0;i>s;s++)o[s][s]=1;return a},er.inv=function(e){if(1!=arguments.length)throw O("inv",arguments.length,1);var r=er.size(e).valueOf();switch(r.length){case 0:return er.divide(1,e);case 1:if(1==r[0])return e instanceof n?new n([er.divide(1,e.valueOf()[0])]):[er.divide(1,e[0])];throw new RangeError("Matrix must be square (size: "+er.format(r)+")");case 2:var t=r[0],a=r[1];if(t==a)return e instanceof n?new n(F(e.valueOf(),t,a)):F(e,t,a);throw new RangeError("Matrix must be square (size: "+er.format(r)+")");default:throw new RangeError("Matrix must be two dimensional (size: "+er.format(r)+")")}},er.ones=function(){var e=rr.argsToArray(arguments);0==e.length?e=[1,1]:1==e.length&&(e[1]=e[0]);var r=new n,t=1;return r.resize(e,t),r},er.size=function(e){if(1!=arguments.length)throw O("size",arguments.length,1);if(g(e)||e instanceof r||e instanceof w||null==e)return[];if(x(e))return[e.length];if(Array.isArray(e))return rr.size(e);if(e instanceof n)return new n(e.size());if(e.valueOf()!==e)return er.size(e.valueOf());throw E("size",e)},er.squeeze=function(e){if(1!=arguments.length)throw O("squeeze",arguments.length,1);return Array.isArray(e)?V(er.clone(e)):e instanceof n?er.matrix(V(e.toArray())):Array.isArray(e.valueOf())?V(er.clone(e.valueOf())):er.clone(e)},er.subset=function(){switch(arguments.length){case 2:return H(arguments[0],arguments[1]);case 3:return Y(arguments[0],arguments[1],arguments[2]);default:throw O("subset",arguments.length,2,3)}},er.transpose=function(e){if(1!=arguments.length)throw O("transpose",arguments.length,1);var r=er.size(e).valueOf();switch(r.length){case 0:return er.clone(e);case 1:return er.clone(e);case 2:for(var t,a=r[1],i=r[0],o=e instanceof n,s=e.valueOf(),u=[],f=er.clone,l=0;a>l;l++){t=u[l]=[];for(var c=0;i>c;c++)t[c]=f(s[c][l])}return 0==i&&(u[0]=[]),o?new n(u):u;default:throw new RangeError("Matrix must be two dimensional (size: "+er.format(r)+")")}},er.zeros=function(){var e=rr.argsToArray(arguments);0==e.length?e=[1,1]:1==e.length&&(e[1]=e[0]);var r=new n;return r.resize(e),r},er.factorial=function(e){if(1!=arguments.length)throw O("factorial",arguments.length,1);if(g(e)){if(!v(e)||0>e)throw new TypeError("Positive integer value expected in function factorial");var r=e,t=r;for(r--;r>1;)t*=r,r--;return 0==t&&(t=1),t}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.factorial);if(e.valueOf()!==e)return er.factorial(e.valueOf());throw E("factorial",e)};var ar={uniform:function(){return Math.random},normal:function(){return function(){for(var e,r,t=-1;0>t||t>1;)e=Math.random(),r=Math.random(),t=1/6*Math.pow(-2*Math.log(e),.5)*Math.cos(2*Math.PI*r)+.5;return t}}};er.distribution=function(e){if(!ar.hasOwnProperty(e))throw new Error("unknown distribution "+e);var r=Array.prototype.slice.call(arguments,1),t=ar[e].apply(this,r);return function(e){var r={random:function(r,a,i){if(arguments.length>3)throw O("random",arguments.length,0,3);if(Array.isArray(r)){var o=a,s=i;return void 0===s&&(s=1),void 0===o&&(o=0),new n(t(r,o,s))}if(arguments.length>2)throw O("random",arguments.length,0,2);var o=r,s=a;return void 0===s&&(s=1),void 0===o&&(o=0),o+e()*(s-o)},randomInt:function(e,r){if(arguments.length>2)throw O("randomInt",arguments.length,0,2);return Math.floor(this.random(e,r))},pickRandom:function(e){if(1!==arguments.length)throw O("pickRandom",arguments.length,1);return e[Math.floor(Math.random()*e.length)]}},t=function(e,n,a){var i,o,s=[];if(e=e.slice(0),e.length>1)for(o=0,i=e.shift();i>o;o++)s.push(t(e,n,a));else for(o=0,i=e.shift();i>o;o++)s.push(r.random.call(r,n,a));return s};return r}(t)};var ir=er.distribution("uniform");er.random=ir.random,er.randomInt=ir.randomInt,er.pickRandom=ir.pickRandom,er.randomMatrix=ir.randomMatrix,er.max=function(e){if(0==arguments.length)throw new Error("Function max requires one or more parameters (0 provided)");if(Array.isArray(e)||e instanceof n||e instanceof d){if(arguments.length>1)throw Error("Wrong number of parameters (1 matrix or multiple scalars expected)");
var r=er.size(e).valueOf();if(1==r.length){if(0==e.length)throw new Error("Cannot calculate max of an empty vector");return Q(e.valueOf())}if(2==r.length){if(0==r[0]||0==r[1])throw new Error("Cannot calculate max of an empty matrix");if(Array.isArray(e))return K(e,r[0],r[1]);if(e instanceof n||e instanceof d)return new n(K(e.valueOf(),r[0],r[1]));throw E("max",e)}throw new RangeError("Cannot calculate max for multi dimensional matrix")}return Q(arguments)},er.min=function(e){if(0==arguments.length)throw new Error("Function min requires one or more parameters (0 provided)");if(Array.isArray(e)||e instanceof n||e instanceof d){if(arguments.length>1)throw Error("Wrong number of parameters (1 matrix or multiple scalars expected)");var r=er.size(e).valueOf();if(1==r.length){if(0==e.length)throw new Error("Cannot calculate min of an empty vector");return Z(e.valueOf())}if(2==r.length){if(0==r[0]||0==r[1])throw new Error("Cannot calculate min of an empty matrix");if(Array.isArray(e))return X(e,r[0],r[1]);if(e instanceof n||e instanceof d)return new n(X(e.valueOf(),r[0],r[1]));throw E("min",e)}throw new RangeError("Cannot calculate min for multi dimensional matrix")}return Z(arguments)},er.acos=function(e){if(1!=arguments.length)throw O("acos",arguments.length,1);if(g(e))return e>=-1&&1>=e?Math.acos(e):er.acos(new r(e,0));if(e instanceof r){var t,a=r.create(e.im*e.im-e.re*e.re+1,-2*e.re*e.im),i=er.sqrt(a);t=i instanceof r?r.create(i.re-e.im,i.im+e.re):r.create(i-e.im,e.re);var o=er.log(t);return o instanceof r?r.create(1.5707963267948966-o.im,o.re):new r(1.5707963267948966,o)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.acos);if(e.valueOf()!==e)return er.acos(e.valueOf());throw E("acos",e)},er.asin=function(e){if(1!=arguments.length)throw O("asin",arguments.length,1);if(g(e))return e>=-1&&1>=e?Math.asin(e):er.asin(new r(e,0));if(e instanceof r){var t,a=e.re,i=e.im,o=r.create(i*i-a*a+1,-2*a*i),s=er.sqrt(o);t=s instanceof r?r.create(s.re-i,s.im+a):r.create(s-i,a);var u=er.log(t);return u instanceof r?r.create(u.im,-u.re):r.create(0,-u)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.asin);if(e.valueOf()!==e)return er.asin(e.valueOf());throw E("asin",e)},er.atan=function(e){if(1!=arguments.length)throw O("atan",arguments.length,1);if(g(e))return Math.atan(e);if(e instanceof r){var t=e.re,a=e.im,i=t*t+(1-a)*(1-a),o=r.create((1-a*a-t*t)/i,-2*t/i),s=er.log(o);return s instanceof r?r.create(-.5*s.im,.5*s.re):r.create(0,.5*s)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.atan);if(e.valueOf()!==e)return er.atan(e.valueOf());throw E("atan",e)},er.atan2=function(e,t){if(2!=arguments.length)throw O("atan2",arguments.length,2);if(g(e)){if(g(t))return Math.atan2(e,t)}else if(e instanceof r&&g(t))return Math.atan2(e.re,t);if(Array.isArray(e)||e instanceof n||Array.isArray(t)||t instanceof n)return rr.map2(e,t,er.atan2);if(t.valueOf()!==t||e.valueOf()!==e)return er.atan2(e.valueOf(),t.valueOf());throw E("atan2",e,t)},er.cos=function(e){if(1!=arguments.length)throw O("cos",arguments.length,1);if(g(e))return Math.cos(e);if(e instanceof r)return r.create(.5*Math.cos(e.re)*(Math.exp(-e.im)+Math.exp(e.im)),.5*Math.sin(e.re)*(Math.exp(-e.im)-Math.exp(e.im)));if(e instanceof w){if(!e.hasBase(w.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return Math.cos(e.value)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.cos);if(e.valueOf()!==e)return er.cos(e.valueOf());throw E("cos",e)},er.cot=function(e){if(1!=arguments.length)throw O("cot",arguments.length,1);if(g(e))return 1/Math.tan(e);if(e instanceof r){var t=Math.exp(-4*e.im)-2*Math.exp(-2*e.im)*Math.cos(2*e.re)+1;return r.create(2*Math.exp(-2*e.im)*Math.sin(2*e.re)/t,(Math.exp(-4*e.im)-1)/t)}if(e instanceof w){if(!e.hasBase(w.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return 1/Math.tan(e.value)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.cot);if(e.valueOf()!==e)return er.cot(e.valueOf());throw E("cot",e)},er.csc=function(e){if(1!=arguments.length)throw O("csc",arguments.length,1);if(g(e))return 1/Math.sin(e);if(e instanceof r){var t=.25*(Math.exp(-2*e.im)+Math.exp(2*e.im))-.5*Math.cos(2*e.re);return r.create(.5*Math.sin(e.re)*(Math.exp(-e.im)+Math.exp(e.im))/t,.5*Math.cos(e.re)*(Math.exp(-e.im)-Math.exp(e.im))/t)}if(e instanceof w){if(!e.hasBase(w.BASE_UNITS.ANGLE))throw new TypeError("Unit in function csc is no angle");return 1/Math.sin(e.value)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.csc);if(e.valueOf()!==e)return er.csc(e.valueOf());throw E("csc",e)},er.sec=function(e){if(1!=arguments.length)throw O("sec",arguments.length,1);if(g(e))return 1/Math.cos(e);if(e instanceof r){var t=.25*(Math.exp(-2*e.im)+Math.exp(2*e.im))+.5*Math.cos(2*e.re);return r.create(.5*Math.cos(e.re)*(Math.exp(-e.im)+Math.exp(e.im))/t,.5*Math.sin(e.re)*(Math.exp(e.im)-Math.exp(-e.im))/t)}if(e instanceof w){if(!e.hasBase(w.BASE_UNITS.ANGLE))throw new TypeError("Unit in function sec is no angle");return 1/Math.cos(e.value)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.sec);if(e.valueOf()!==e)return er.sec(e.valueOf());throw E("sec",e)},er.sin=function(e){if(1!=arguments.length)throw O("sin",arguments.length,1);if(g(e))return Math.sin(e);if(e instanceof r)return r.create(.5*Math.sin(e.re)*(Math.exp(-e.im)+Math.exp(e.im)),.5*Math.cos(e.re)*(Math.exp(e.im)-Math.exp(-e.im)));if(e instanceof w){if(!e.hasBase(w.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cos is no angle");return Math.sin(e.value)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.sin);if(e.valueOf()!==e)return er.sin(e.valueOf());throw E("sin",e)},er.tan=function(e){if(1!=arguments.length)throw O("tan",arguments.length,1);if(g(e))return Math.tan(e);if(e instanceof r){var t=Math.exp(-4*e.im)+2*Math.exp(-2*e.im)*Math.cos(2*e.re)+1;return r.create(2*Math.exp(-2*e.im)*Math.sin(2*e.re)/t,(1-Math.exp(-4*e.im))/t)}if(e instanceof w){if(!e.hasBase(w.BASE_UNITS.ANGLE))throw new TypeError("Unit in function tan is no angle");return Math.tan(e.value)}if(Array.isArray(e)||e instanceof n)return rr.map(e,er.tan);if(e.valueOf()!==e)return er.tan(e.valueOf());throw E("tan",e)},er["in"]=function(e,r){if(2!=arguments.length)throw O("in",arguments.length,2);if(e instanceof w&&(r instanceof w||x(r)))return e["in"](r);if(Array.isArray(e)||e instanceof n||Array.isArray(r)||r instanceof n)return rr.map2(e,r,er["in"]);if(e.valueOf()!==e||r.valueOf()!==r)return er["in"](e.valueOf(),r.valueOf());throw E("in",e,r)},er.clone=function(r){if(1!=arguments.length)throw O("clone",arguments.length,1);if(null==r)return r;if("function"==typeof r.clone)return r.clone();if(g(r)||x(r)||e(r))return r;if(Array.isArray(r)){var t=er.clone;return r.map(function(e){return t(e)})}if(r instanceof Object)return rr.mapObject(r,er.clone);throw E("clone",r)},er.eval=function(e,r){if(1!=arguments.length&&2!=arguments.length)throw O("eval",arguments.length,1,2);var t;if(t=r?r instanceof er.expr.Scope?r:new er.expr.Scope(r):new er.expr.Scope,x(e)){var a=er.parse(e,t);return a.eval()}if(Array.isArray(e)||e instanceof n)return rr.map(e,function(e){var r=er.parse(e,t);return r.eval()});throw new TypeError("String or matrix expected")},er.format=function(e,r){var t=arguments.length;if(1!=t&&2!=t)throw O("format",t,1,2);if(1==t){var n=arguments[0];return g(n)?rr.formatNumber(n,er.options.precision):Array.isArray(n)?rr.formatArray(n):x(n)?'"'+n+'"':n instanceof Object?n.toString():String(n)}if(!x(e))throw new TypeError("String expected as first parameter in function format");if(!(r instanceof Object))throw new TypeError("Object expected as first parameter in function format");return e.replace(/\$([\w\.]+)/g,function(e,t){for(var n=t.split("."),a=r[n.shift()];n.length&&void 0!=a;){var i=n.shift();a=i?a[i]:a+"."}return void 0!=a?a:e})},er.help=function(e){if(1!=arguments.length)throw new SyntaxError("Wrong number of arguments in function help ("+arguments.length+" provided, 1 expected)");var r=null;if(e instanceof String||"string"==typeof e)r=e;else{var n;for(n in er)if(er.hasOwnProperty(n)&&e===er[n]){r=n;break}if(!r)for(n in er.type)if(er.type.hasOwnProperty(n)&&e===er.type[n]){r=n;break}}if(r){var a=er.docs[r];if(!a)throw new Error('No documentation found on "'+r+'"');return new t(a)}throw new Error('Could not find search term "'+e+'"')},er["import"]=function(e,r){var t,n={override:!1,wrap:!0};if(r&&r instanceof Object&&rr.extend(n,r),x(e)){if("undefined"==typeof require)throw new Error("Cannot load file: require not available.");var a=require(e);er["import"](a)}else if(J(e)){if(t=e.name,!t)throw new Error("Cannot import an unnamed function or object");(n.override||void 0===er[t])&&$(t,e,n)}else if(e instanceof Object)for(t in e)if(e.hasOwnProperty(t)){var i=e[t];J(i)?$(t,i,n):er["import"](i)}},function(){function e(){tr=0,nr=J.charAt(0)}function t(){tr++,nr=J.charAt(tr)}function a(){return J.charAt(tr+1)}function i(){for(ir=Z.NULL,ar="";" "==nr||"	"==nr;)t();if("#"==nr)for(;"\n"!=nr&&""!=nr;)t();if(""==nr)return ir=Z.DELIMITER,void 0;var e=nr+a();if(X[e])return ir=Z.DELIMITER,ar=e,t(),t(),void 0;if(X[nr])return ir=Z.DELIMITER,ar=nr,t(),void 0;if(s(nr)){if(ir=Z.NUMBER,"."==nr)ar+=nr,t(),u(nr)||(ir=Z.UNKNOWN);else{for(;u(nr);)ar+=nr,t();"."==nr&&(ar+=nr,t())}for(;u(nr);)ar+=nr,t();if("E"==nr||"e"==nr)for(ar+=nr,t(),("+"==nr||"-"==nr)&&(ar+=nr,t()),u(nr)||(ir=Z.UNKNOWN);u(nr);)ar+=nr,t()}else{if(!o(nr)){for(ir=Z.UNKNOWN;""!=nr;)ar+=nr,t();throw W('Syntax error in part "'+ar+'"')}for(ir=Z.SYMBOL;o(nr)||u(nr);)ar+=nr,t()}}function o(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"==e}function s(e){return e>="0"&&"9">=e||"."==e}function u(e){return e>="0"&&"9">=e}function f(r){e(),i();var t;if(t=""==ar?new N(void 0):l(r),""!=ar)throw ir==Z.DELIMITER?K("Unknown operator "+ar):W('Unexpected part "'+ar+'"');return t}function l(e){var r,t,n;for("\n"!=ar&&";"!=ar&&""!=ar&&(r=c(e));"\n"==ar||";"==ar;)t||(t=new z,r&&(n=";"!=ar,t.add(r,n))),i(),"\n"!=ar&&";"!=ar&&""!=ar&&(r=c(e),n=";"!=ar,t.add(r,n));return t?t:(r||(r=c(e)),r)}function c(e){var r=m(e),t="ans";return new R(t,r,e)}function m(e){if(ir==Z.SYMBOL&&"function"==ar){if(i(),ir!=Z.SYMBOL)throw W("Function name expected");var r=ar;if(i(),"("!=ar)throw W("Opening parenthesis ( expected");for(var t=e.createSubScope(),n=[];;){if(i(),ir!=Z.SYMBOL)throw W("Variable name expected");if(n.push(ar),i(),","!=ar){if(")"==ar)break;throw W('Comma , or closing parenthesis ) expected"')}}if(i(),"="!=ar)throw W("Equal sign = expected");i();var a=h(t);return new U(r,n,a,t,e)}return h(e)}function h(e){var r,t,n,a,o=p(e);if("="==ar){if(o instanceof S)return i(),r=o.name,t=null,a=h(e),new R(r,a,e);if(o instanceof T&&o.object instanceof S)return i(),r=o.object.name,t=o.params,n=o.paramScopes,a=h(e),new C(r,t,n,a,e);throw W("Symbol expected at the left hand side of assignment operator =")}return o}function p(e){var r,t,n,a=[];if(r=":"==ar?new N(0):g(e),":"==ar){for(a.push(r);":"==ar;)i(),")"==ar||","==ar||""==ar?a.push(new S("end",e)):a.push(g(e));a.length&&(t="range",n=er.range,r=new M(t,n,a))}return r}function g(e){var r,t,n,a,o;for(r=v(e),t={"in":"in"};void 0!==t[ar];)n=ar,a=er[t[n]],i(),o=[r,v(e)],r=new M(n,a,o);return r}function v(e){var r=d(e);return r}function d(e){var r,t,n,a,o;for(r=y(e),t={"==":"equal","!=":"unequal","<":"smaller",">":"larger","<=":"smallereq",">=":"largereq"};void 0!==t[ar];)n=ar,a=er[t[n]],i(),o=[r,y(e)],r=new M(n,a,o);return r}function y(e){var r,t,n,a,o;for(r=b(e),t={"+":"add","-":"subtract"};void 0!==t[ar];)n=ar,a=er[t[n]],i(),o=[r,b(e)],r=new M(n,a,o);return r}function b(e){var r,t,n,a,o;for(r=E(e),t={"*":"multiply",".*":"emultiply","/":"divide","./":"edivide","%":"mod",mod:"mod"};void 0!==t[ar];)n=ar,a=er[t[n]],i(),o=[r,E(e)],r=new M(n,a,o);return r}function E(e){var r,t,n;return"-"==ar?(r=ar,t=er.unary,i(),n=[E(e)],new M(r,t,n)):A(e)}function A(e){var r,t,n,a,o,s,u;for(n=[L(e)],a=[];"^"==ar||".^"==ar;)a.push(ar),i(),n.push(L(e));for(r=n.pop();n.length;)t=n.pop(),o=a.pop(),s="^"==o?er.pow:er.epow,u=[t,r],r=new M(o,s,u);return r}function L(e){var r,t,n,a;for(r=I(e);"!"==ar;)t=ar,n=er.factorial,i(),a=[r],r=new M(t,n,a);return r}function I(e){var r,t,n,a;for(r=_(e);"'"==ar;)t=ar,n=er.transpose,i(),a=[r],r=new M(t,n,a);return r}function _(e){var r,t,n,a;if(ir==Z.SYMBOL&&$[ar]){if(a=$[ar],i(),"("==ar){if(r=[],t=[],i(),")"!=ar)for(n=e.createSubScope(),t.push(n),r.push(p(n));","==ar;)i(),n=e.createSubScope(),t.push(n),r.push(p(n));if(")"!=ar)throw W("Parenthesis ) expected");i()}return new a(r,t)}return P(e)}function P(e){var r,t;return ir==Z.SYMBOL?(t=ar,i(),r=new S(t,e),B(e,r)):G(e)}function B(e,r){for(var t,n,a;"("==ar;){if(t=[],n=[],i(),")"!=ar)for(a=e.createSubScope(),n.push(a),t.push(p(a));","==ar;)i(),a=e.createSubScope(),n.push(a),t.push(p(a));if(")"!=ar)throw W("Parenthesis ) expected");i(),r=new T(r,t,n)}return r}function G(e){var r,n,a;if('"'==ar){for(n="",a="";""!=nr&&('"'!=nr||"\\"==a);)n+=nr,a=nr,t();if(i(),'"'!=ar)throw W('End of string " expected');return i(),r=new N(n),r=B(e,r)}return j(e)}function j(e){var r,t,n,a,o,s;if("["==ar){for(i();"\n"==ar;)i();if("]"!=ar){for(t=[],n=0,a=0,t[0]=[h(e)];","==ar||";"==ar;){for(","==ar?a++:(n++,a=0,t[n]=[]),i();"\n"==ar;)i();for(t[n][a]=h(e);"\n"==ar;)i()}for(o=t.length,s=t.length>0?t[0].length:0,n=1;o>n;n++)if(t[n].length!=s)throw K("Number of columns must match ("+t[n].length+" != "+s+")");if("]"!=ar)throw W("End of matrix ] expected");i(),r=new q(t)}else i(),r=new q([[]]);return r=B(e,r)}return k(e)}function k(e){var t,n,a;if(ir==Z.NUMBER){if(a="."==ar?0:Number(ar),i(),ir==Z.SYMBOL){if("i"==ar||"I"==ar)return n=new r(0,a),i(),new N(n);if(w.isPlainUnit(ar))return n=new w(a,ar),i(),new N(n);throw Q('Unknown unit "'+ar+'"')}return t=new N(a),t=B(e,t)}return F(e)}function F(e){var r;if("("==ar){if(i(),r=h(e),")"!=ar)throw W("Parenthesis ) expected");return i(),r=B(e,r)}return V(e)}function V(){throw""==ar?W("Unexpected end of expression"):W("Value expected")}function H(){return void 0}function D(){return tr-ar.length+1}function Y(e){var r=H(),t=D();return void 0===r?void 0===t?e:e+" (char "+t+")":e+" (line "+r+", char "+t+")"}function W(e){return new SyntaxError(Y(e))}function Q(e){return new TypeError(Y(e))}function K(e){return new Error(Y(e))}er.parse=function(e,r){if(1!=arguments.length&&2!=arguments.length)throw O("parse",arguments.length,1,2);var t;if(t=r?r instanceof er.expr.Scope?r:new er.expr.Scope(r):new er.expr.Scope,x(e))return J=e||"",f(t);if(Array.isArray(e)||e instanceof n)return rr.map(e,function(e){return J=e||"",f(t)});throw new TypeError("String or matrix expected")};var Z={NULL:0,DELIMITER:1,NUMBER:2,SYMBOL:3,UNKNOWN:4},X={",":!0,"(":!0,")":!0,"[":!0,"]":!0,'"':!0,"\n":!0,";":!0,"+":!0,"-":!0,"*":!0,".*":!0,"/":!0,"./":!0,"%":!0,"^":!0,".^":!0,"!":!0,"'":!0,"=":!0,":":!0,"==":!0,"!=":!0,"<":!0,">":!0,"<=":!0,">=":!0},$=er.expr.node.handlers,J="",tr=0,nr="",ar="",ir=Z.NULL}(),er.select=function(e){return new er.type.Selector(e)},er["typeof"]=function(e){if(1!=arguments.length)throw O("typeof",arguments.length,1);var r,t=typeof e;if("object"==t){if(null==e)return"null";if(e instanceof Boolean)return"boolean";if(e instanceof Number)return"number";if(e instanceof String)return"string";if(Array.isArray(e))return"array";if(e instanceof Date)return"date";if(e.constructor){for(r in er)if(er.hasOwnProperty(r)&&e.constructor==er[r])return r.toLowerCase();for(r in er.type)if(er.type.hasOwnProperty(r)&&e.constructor==er.type[r])return r.toLowerCase();if(e.constructor.name)return e.constructor.name.toLowerCase()}}return t},er.docs.Infinity={name:"Infinity",category:"Constants",syntax:["Infinity"],description:"Infinity, a number which is larger than the maximum number that can be handled by a floating point number.",examples:["Infinity","1 / 0"],seealso:[]},er.docs.LN10={name:"LN10",category:"Constants",syntax:["LN10"],description:"Returns the natural logarithm of 10, approximately equal to 2.302",examples:["LN10","log(10)"],seealso:[]},er.docs.LN2={name:"LN2",category:"Constants",syntax:["LN2"],description:"Returns the natural logarithm of 2, approximately equal to 0.693",examples:["LN2","log(2)"],seealso:[]},er.docs.LOG10E={name:"LOG10E",category:"Constants",syntax:["LOG10E"],description:"Returns the base-10 logarithm of E, approximately equal to 0.434",examples:["LOG10E","log(e, 10)"],seealso:[]},er.docs.LOG2E={name:"LOG2E",category:"Constants",syntax:["LOG2E"],description:"Returns the base-2 logarithm of E, approximately equal to 1.442",examples:["LOG2E","log(e, 2)"],seealso:[]},er.docs.NaN={name:"NaN",category:"Constants",syntax:["NaN"],description:"Not a number",examples:["NaN","0 / 0"],seealso:[]},er.docs.SQRT1_2={name:"SQRT1_2",category:"Constants",syntax:["SQRT1_2"],description:"Returns the square root of 1/2, approximately equal to 0.707",examples:["SQRT1_2","sqrt(1/2)"],seealso:[]},er.docs.SQRT2={name:"SQRT2",category:"Constants",syntax:["SQRT2"],description:"Returns the square root of 2, approximately equal to 1.414",examples:["SQRT2","sqrt(2)"],seealso:[]},er.docs.e=er.docs.E={name:"e",category:"Constants",syntax:["e"],description:"Euler's number, the base of the natural logarithm. Approximately equal to 2.71828",examples:["e","e ^ 2","exp(2)","log(e)"],seealso:["exp"]},er.docs["false"]={name:"false",category:"Constants",syntax:["false"],description:"Boolean value false",examples:["false"],seealso:["true"]},er.docs.i={name:"i",category:"Constants",syntax:["i"],description:"Imaginary unit, defined as i*i=-1. A complex number is described as a + b*i, where a is the real part, and b is the imaginary part.",examples:["i","i * i","sqrt(-1)"],seealso:[]},er.docs.pi=er.docs.PI={name:"pi",category:"Constants",syntax:["pi"],description:"The number pi is a mathematical constant that is the ratio of a circle's circumference to its diameter, and is approximately equal to 3.14159",examples:["pi","sin(pi/2)"],seealso:["tau"]},er.docs.tau={name:"tau",category:"Constants",syntax:["pi"],description:"Tau is the ratio constant of a circle's circumference to radius, equal to 2 * pi, approximately 6.2832.",examples:["tau","2 * pi"],seealso:["pi"]},er.docs["true"]={name:"true",category:"Constants",syntax:["true"],description:"Boolean value true",examples:["true"],seealso:["false"]},er.docs.abs={name:"abs",category:"Arithmetic",syntax:["abs(x)"],description:"Compute the absolute value.",examples:["abs(3.5)","abs(-4.2)"],seealso:["sign"]},er.docs.add={name:"add",category:"Operators",syntax:["x + y","add(x, y)"],description:"Add two values.",examples:["2.1 + 3.6","ans - 3.6","3 + 2i",'"hello" + " world"',"3 cm + 2 inch"],seealso:["subtract"]},er.docs.ceil={name:"ceil",category:"Arithmetic",syntax:["ceil(x)"],description:"Round a value towards plus infinity.If x is complex, both real and imaginary part are rounded towards plus infinity.",examples:["ceil(3.2)","ceil(3.8)","ceil(-4.2)"],seealso:["floor","fix","round"]},er.docs.cube={name:"cube",category:"Arithmetic",syntax:["cube(x)"],description:"Compute the cube of a value. The cube of x is x * x * x.",examples:["cube(2)","2^3","2 * 2 * 2"],seealso:["multiply","square","pow"]},er.docs.divide={name:"divide",category:"Operators",syntax:["x / y","divide(x, y)"],description:"Divide two values.",examples:["2 / 3","ans * 3","4.5 / 2","3 + 4 / 2","(3 + 4) / 2","18 km / 4.5"],seealso:["multiply"]},er.docs.edivide={name:"edivide",category:"Operators",syntax:["x ./ y","edivide(x, y)"],description:"divide two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a ./ b"],seealso:["multiply","emultiply","divide"]},er.docs.emultiply={name:"emultiply",category:"Operators",syntax:["x .* y","emultiply(x, y)"],description:"multiply two values element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","b = [2, 1, 1; 3, 2, 5]","a .* b"],seealso:["multiply","divide","edivide"]},er.docs.epow={name:"epow",category:"Operators",syntax:["x .^ y","epow(x, y)"],description:"Calculates the power of x to y element wise.",examples:["a = [1, 2, 3; 4, 5, 6]","a .^ 2"],seealso:["pow"]},er.docs.equal={name:"equal",category:"Operators",syntax:["x == y","equal(x, y)"],description:"Check equality of two values. Returns 1 if the values are equal, and 0 if not.",examples:["2+2 == 3","2+2 == 4","a = 3.2","b = 6-2.8","a == b","50cm == 0.5m"],seealso:["unequal","smaller","larger","smallereq","largereq"]},er.docs.exp={name:"exp",category:"Arithmetic",syntax:["exp(x)"],description:"Calculate the exponent of a value.",examples:["exp(1.3)","e ^ 1.3","log(exp(1.3))","x = 2.4","(exp(i*x) == cos(x) + i*sin(x))   # Euler's formula"],seealso:["square","multiply","log"]},er.docs.fix={name:"fix",category:"Arithmetic",syntax:["fix(x)"],description:"Round a value towards zero.If x is complex, both real and imaginary part are rounded towards zero.",examples:["fix(3.2)","fix(3.8)","fix(-4.2)","fix(-4.8)"],seealso:["ceil","floor","round"]},er.docs.floor={name:"floor",category:"Arithmetic",syntax:["floor(x)"],description:"Round a value towards minus infinity.If x is complex, both real and imaginary part are rounded towards minus infinity.",examples:["floor(3.2)","floor(3.8)","floor(-4.2)"],seealso:["ceil","fix","round"]},er.docs.gcd={name:"gcd",category:"Arithmetic",syntax:["gcd(a, b)","gcd(a, b, c, ...)"],description:"Compute the greatest common divisor.",examples:["gcd(8, 12)","gcd(-4, 6)","gcd(25, 15, -10)"],seealso:["lcm","xgcd"]},er.docs.larger={name:"larger",category:"Operators",syntax:["x > y","larger(x, y)"],description:"Check if value x is larger than y. Returns 1 if x is larger than y, and 0 if not.",examples:["2 > 3","5 > 2*2","a = 3.3","b = 6-2.8","(a > b)","(b < a)","5 cm > 2 inch"],seealso:["equal","unequal","smaller","smallereq","largereq"]},er.docs.largereq={name:"largereq",category:"Operators",syntax:["x >= y","largereq(x, y)"],description:"Check if value x is larger or equal to y. Returns 1 if x is larger or equal to y, and 0 if not.",examples:["2 > 1+1","2 >= 1+1","a = 3.2","b = 6-2.8","(a > b)"],seealso:["equal","unequal","smallereq","smaller","largereq"]},er.docs.lcm={name:"lcm",category:"Arithmetic",syntax:["lcm(x, y)"],description:"Compute the least common multiple.",examples:["lcm(4, 6)","lcm(6, 21)","lcm(6, 21, 5)"],seealso:["gcd"]},er.docs.log={name:"log",category:"Arithmetic",syntax:["log(x)","log(x, base)"],description:"Compute the logarithm of a value. If no base is provided, the natural logarithm of x is calculated. If base if provided, the logarithm is calculated for the specified base. log(x, base) is defined as log(x) / log(base).",examples:["log(3.5)","a = log(2.4)","exp(a)","10 ^ 3","log(1000, 10)","log(1000) / log(10)","b = logb(1024, 2)","2 ^ b"],seealso:["exp","log10"]},er.docs.log10={name:"log10",category:"Arithmetic",syntax:["log10(x)"],description:"Compute the 10-base logarithm of a value.",examples:["log10(1000)","10 ^ 3","log10(0.01)","log(1000) / log(10)","log(1000, 10)"],seealso:["exp","log"]},er.docs.mod={name:"mod",category:"Operators",syntax:["x % y","x mod y","mod(x, y)"],description:"Calculates the modulus, the remainder of an integer division.",examples:["7 % 3","11 % 2","10 mod 4","function isOdd(x) = x % 2","isOdd(2)","isOdd(3)"],seealso:[]},er.docs.multiply={name:"multiply",category:"Operators",syntax:["x * y","multiply(x, y)"],description:"multiply two values.",examples:["2.1 * 3.6","ans / 3.6","2 * 3 + 4","2 * (3 + 4)","3 * 2.1 km"],seealso:["divide"]},er.docs.pow={name:"pow",category:"Operators",syntax:["x ^ y","pow(x, y)"],description:"Calculates the power of x to y, x^y.",examples:["2^3 = 8","2*2*2","1 + e ^ (pi * i)"],seealso:["unequal","smaller","larger","smallereq","largereq"]},er.docs.round={name:"round",category:"Arithmetic",syntax:["round(x)","round(x, n)"],description:"round a value towards the nearest integer.If x is complex, both real and imaginary part are rounded towards the nearest integer. When n is specified, the value is rounded to n decimals.",examples:["round(3.2)","round(3.8)","round(-4.2)","round(-4.8)","round(pi, 3)","round(123.45678, 2)"],seealso:["ceil","floor","fix"]},er.docs.sign={name:"sign",category:"Arithmetic",syntax:["sign(x)"],description:"Compute the sign of a value. The sign of a value x is 1 when x>1, -1 when x<0, and 0 when x=0.",examples:["sign(3.5)","sign(-4.2)","sign(0)"],seealso:["abs"]},er.docs.smaller={name:"smaller",category:"Operators",syntax:["x < y","smaller(x, y)"],description:"Check if value x is smaller than value y. Returns 1 if x is smaller than y, and 0 if not.",examples:["2 < 3","5 < 2*2","a = 3.3","b = 6-2.8","(a < b)","5 cm < 2 inch"],seealso:["equal","unequal","larger","smallereq","largereq"]},er.docs.smallereq={name:"smallereq",category:"Operators",syntax:["x <= y","smallereq(x, y)"],description:"Check if value x is smaller or equal to value y. Returns 1 if x is smaller than y, and 0 if not.",examples:["2 < 1+1","2 <= 1+1","a = 3.2","b = 6-2.8","(a < b)"],seealso:["equal","unequal","larger","smaller","largereq"]},er.docs.sqrt={name:"sqrt",category:"Arithmetic",syntax:["sqrt(x)"],description:"Compute the square root value. If x = y * y, then y is the square root of x.",examples:["sqrt(25)","5 * 5","sqrt(-1)"],seealso:["square","multiply"]},er.docs.square={name:"square",category:"Arithmetic",syntax:["square(x)"],description:"Compute the square of a value. The square of x is x * x.",examples:["square(3)","sqrt(9)","3^2","3 * 3"],seealso:["multiply","pow","sqrt","cube"]},er.docs.subtract={name:"subtract",category:"Operators",syntax:["x - y","subtract(x, y)"],description:"subtract two values.",examples:["5.3 - 2","ans + 2","2/3 - 1/6","2 * 3 - 3","2.1 km - 500m"],seealso:["add"]},er.docs.unary={name:"unary",category:"Operators",syntax:["-x","unary(x)"],description:"Inverse the sign of a value.",examples:["-4.5","-(-5.6)"],seealso:["add","subtract"]},er.docs.unequal={name:"unequal",category:"Operators",syntax:["x != y","unequal(x, y)"],description:"Check unequality of two values. Returns 1 if the values are unequal, and 0 if they are equal.",examples:["2+2 != 3","2+2 != 4","a = 3.2","b = 6-2.8","a != b","50cm != 0.5m","5 cm != 2 inch"],seealso:["equal","smaller","larger","smallereq","largereq"]},er.docs.xgcd={name:"xgcd",category:"Arithmetic",syntax:["xgcd(a, b)"],description:"Calculate the extended greatest common divisor for two values",examples:["xgcd(8, 12)","gcd(8, 12)","xgcd(36163, 21199)"],seealso:["gcd","lcm"]},er.docs.arg={name:"arg",category:"Complex",syntax:["arg(x)"],description:"Compute the argument of a complex value. If x = a+bi, the argument is computed as atan2(b, a).",examples:["arg(2 + 2i)","atan2(3, 2)","arg(2 - 3i)"],seealso:["re","im","conj","abs"]},er.docs.conj={name:"conj",category:"Complex",syntax:["conj(x)"],description:"Compute the complex conjugate of a complex value. If x = a+bi, the complex conjugate is a-bi.",examples:["conj(2 + 3i)","conj(2 - 3i)","conj(-5.2i)"],seealso:["re","im","abs","arg"]},er.docs.im={name:"im",category:"Complex",syntax:["im(x)"],description:"Get the imaginary part of a complex number.",examples:["im(2 + 3i)","re(2 + 3i)","im(-5.2i)","im(2.4)"],seealso:["re","conj","abs","arg"]},er.docs.re={name:"re",category:"Complex",syntax:["re(x)"],description:"Get the real part of a complex number.",examples:["re(2 + 3i)","im(2 + 3i)","re(-5.2i)","re(2.4)"],seealso:["im","conj","abs","arg"]},er.docs["boolean"]={name:"boolean",category:"Type",syntax:["x","boolean(x)"],description:"Convert a string or number into a boolean.",examples:["boolean(0)","boolean(1)","boolean(3)",'boolean("true")','boolean("false")'],seealso:["complex","matrix","range","string","unit"]},er.docs.complex={name:"complex",category:"Type",syntax:["complex()","complex(re, im)","complex(string)"],description:"Create a complex number.",examples:["complex()","complex(2, 3)",'complex("7 - 2i")'],seealso:["boolean","matrix","number","range","string","unit"]},er.docs.matrix={name:"matrix",category:"Type",syntax:["[]","[a1, b1, ...; a2, b2, ...]","matrix()","matrix([...])"],description:"Create a matrix.",examples:["[]","[1, 2, 3]","[1, 2, 3; 4, 5, 6]","matrix()","matrix([3, 4])"],seealso:["boolean","complex","number","range","string","unit"]},er.docs.number={name:"number",category:"Type",syntax:["x","number(x)"],description:"Create a number or convert a string or boolean into a number.",examples:["2","2e3","4.05","number(2)",'number("7.2")',"number(true)"],seealso:["boolean","complex","matrix","range","string","unit"]},er.docs.range={name:"range",category:"Type",syntax:["start:end","start:step:end","range(start, end)","range(start, step, end)","range(string)"],description:"Create a range.",examples:["1:5","3:-1:-3","range(3, 6)","range(0, 2, 10)",'range("4:10")',"a = [1, 2, 3; 4, 5, 6]","a(:, 1:2)"],seealso:["boolean","complex","matrix","number","string","unit"]},er.docs.string={name:"string",category:"Type",syntax:['"text"',"string(x)"],description:"Create a string or convert a value to a string",examples:['"Hello World!"',"string(4.2)","string(3 + 2i)"],seealso:["boolean","complex","matrix","number","range","unit"]},er.docs.unit={name:"unit",category:"Type",syntax:["value unit","unit(value, unit)","unit(string)"],description:"Create a unit.",examples:["5.5 mm","3 inch",'unit(7.1, "kilogram")','unit("23 deg")'],seealso:["boolean","complex","matrix","number","range","string"]},er.docs.concat={name:"concat",category:"Matrix",syntax:["concat(a, b, c, ...)","concat(a, b, c, ..., dim)"],description:"Concatenate matrices. By default, the matrices are concatenated by the first dimension. The dimension on which to concatenate can be provided as last argument.",examples:["a = [1, 2; 5, 6]","b = [3, 4; 7, 8]","concat(a, b)","[a, b]","concat(a, b, 2)","[a; b]"],seealso:["det","diag","eye","inv","ones","size","squeeze","subset","transpose","zeros"]},er.docs.det={name:"det",category:"Matrix",syntax:["det(x)"],description:"Calculate the determinant of a matrix",examples:["det([1, 2; 3, 4])","det([-2, 2, 3; -1, 1, 3; 2, 0, -1])"],seealso:["concat","diag","eye","inv","ones","size","squeeze","subset","transpose","zeros"]},er.docs.diag={name:"diag",category:"Matrix",syntax:["diag(x)","diag(x, k)"],description:"Create a diagonal matrix or retrieve the diagonal of a matrix. When x is a vector, a matrix with the vector values on the diagonal will be returned. When x is a matrix, a vector with the diagonal values of the matrix is returned.When k is provided, the k-th diagonal will be filled in or retrieved, if k is positive, the values are placed on the super diagonal. When k is negative, the values are placed on the sub diagonal.",examples:["diag(1:4)","diag(1:4, 1)","a = [1, 2, 3; 4, 5, 6; 7, 8, 9]","diag(a)"],seealso:["concat","det","eye","inv","ones","size","squeeze","subset","transpose","zeros"]},er.docs.eye={name:"eye",category:"Matrix",syntax:["eye(n)","eye(m, n)","eye([m, n])","eye"],description:"Returns the identity matrix with size m-by-n. The matrix has ones on the diagonal and zeros elsewhere.",examples:["eye(3)","eye(3, 5)","a = [1, 2, 3; 4, 5, 6]","eye(size(a))"],seealso:["concat","det","diag","inv","ones","size","squeeze","subset","transpose","zeros"]},er.docs.inv={name:"inv",category:"Matrix",syntax:["inv(x)"],description:"Calculate the inverse of a matrix",examples:["inv([1, 2; 3, 4])","inv(4)","1 / 4"],seealso:["concat","det","diag","eye","ones","size","squeeze","subset","transpose","zeros"]},er.docs.ones={name:"ones",category:"Matrix",syntax:["ones(n)","ones(m, n)","ones(m, n, p, ...)","ones([m, n])","ones([m, n, p, ...])","ones"],description:"Create a matrix containing ones.",examples:["ones(3)","ones(3, 5)","ones([2,3]) * 4.5","a = [1, 2, 3; 4, 5, 6]","ones(size(a))"],seealso:["concat","det","diag","eye","inv","size","squeeze","subset","transpose","zeros"]},er.docs.size={name:"size",category:"Matrix",syntax:["size(x)"],description:"Calculate the size of a matrix.",examples:["size(2.3)",'size("hello world")',"a = [1, 2; 3, 4; 5, 6]","size(a)","size(1:6)"],seealso:["concat","det","diag","eye","inv","ones","squeeze","subset","transpose","zeros"]},er.docs.squeeze={name:"squeeze",category:"Matrix",syntax:["squeeze(x)"],description:"Remove singleton dimensions from a matrix.",examples:["a = zeros(1,3,2)","size(squeeze(a))","b = zeros(3,1,1)","size(squeeze(b))"],seealso:["concat","det","diag","eye","inv","ones","size","subset","transpose","zeros"]},er.docs.subset={name:"subset",category:"Matrix",syntax:["value(index)","value(index) = replacement","subset(value, [index])","subset(value, [index], replacement)"],description:"Get or set a subset of a matrix or string.",examples:["d = [1, 2; 3, 4]","e = []","e(0, 0:1) = [5, 6]","e(1, :) = [7, 8]","f = d * e","f(1, 0)","f(:, 0)"],seealso:["concat","det","diag","eye","inv","ones","range","size","squeeze","transpose","zeros"]},er.docs.transpose={name:"transpose",category:"Matrix",syntax:["x'","transpose(x)"],description:"Transpose a matrix",examples:["a = [1, 2, 3; 4, 5, 6]","a'","transpose(a)"],seealso:["concat","det","diag","eye","inv","ones","size","squeeze","subset","zeros"]},er.docs.zeros={name:"zeros",category:"Matrix",syntax:["zeros(n)","zeros(m, n)","zeros(m, n, p, ...)","zeros([m, n])","zeros([m, n, p, ...])","zeros"],description:"Create a matrix containing zeros.",examples:["zeros(3)","zeros(3, 5)","a = [1, 2, 3; 4, 5, 6]","zeros(size(a))"],seealso:["concat","det","diag","eye","inv","ones","size","squeeze","subset","transpose"]},er.docs.factorial={name:"factorial",category:"Probability",syntax:["x!","factorial(x)"],description:"Compute the factorial of a value",examples:["5!","5*4*3*2*1","3!"],seealso:[]},er.docs.random={name:"random",category:"Probability",syntax:["random(min, max)"],description:"Return a random number between 0 and 1.",examples:["random()"],seealso:[]},er.docs.randInt={name:"randInt",category:"Probability",syntax:["randInt()"],description:"Return a random number between 0 and 1.",examples:["randInt()"],seealso:[]},er.docs.max={name:"max",category:"Statistics",syntax:["max(a, b, c, ...)"],description:"Compute the maximum value of a list of values.",examples:["max(2, 3, 4, 1)","max(2.7, 7.1, -4.5, 2.0, 4.1)","min(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["min"]},er.docs.min={name:"min",category:"Statistics",syntax:["min(a, b, c, ...)"],description:"Compute the minimum value of a list of values.",examples:["min(2, 3, 4, 1)","min(2.7, 7.1, -4.5, 2.0, 4.1)","max(2.7, 7.1, -4.5, 2.0, 4.1)"],seealso:["max"]},er.docs.acos={name:"acos",category:"Trigonometry",syntax:["acos(x)"],description:"Compute the inverse cosine of a value in radians.",examples:["acos(0.5)","acos(cos(2.3))"],seealso:["cos","acos","asin"]},er.docs.asin={name:"asin",category:"Trigonometry",syntax:["asin(x)"],description:"Compute the inverse sine of a value in radians.",examples:["asin(0.5)","asin(sin(2.3))"],seealso:["sin","acos","asin"]},er.docs.atan={name:"atan",category:"Trigonometry",syntax:["atan(x)"],description:"Compute the inverse tangent of a value in radians.",examples:["atan(0.5)","atan(tan(2.3))"],seealso:["tan","acos","asin"]},er.docs.atan2={name:"atan2",category:"Trigonometry",syntax:["atan2(y, x)"],description:"Computes the principal value of the arc tangent of y/x in radians.",examples:["atan2(2, 2) / pi","angle = 60 deg in rad","x = cos(angle)","y = sin(angle)","atan2(y, x)"],seealso:["sin","cos","tan"]},er.docs.cos={name:"cos",category:"Trigonometry",syntax:["cos(x)"],description:"Compute the cosine of x in radians.",examples:["cos(2)","cos(pi / 4) ^ 2","cos(180 deg)","cos(60 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["acos","sin","tan"]},er.docs.cot={name:"cot",category:"Trigonometry",syntax:["cot(x)"],description:"Compute the cotangent of x in radians. Defined as 1/tan(x)",examples:["cot(2)","1 / tan(2)"],seealso:["sec","csc","tan"]},er.docs.csc={name:"csc",category:"Trigonometry",syntax:["csc(x)"],description:"Compute the cosecant of x in radians. Defined as 1/sin(x)",examples:["csc(2)","1 / sin(2)"],seealso:["sec","cot","sin"]},er.docs.sec={name:"sec",category:"Trigonometry",syntax:["sec(x)"],description:"Compute the secant of x in radians. Defined as 1/cos(x)",examples:["sec(2)","1 / cos(2)"],seealso:["cot","csc","cos"]},er.docs.sin={name:"sin",category:"Trigonometry",syntax:["sin(x)"],description:"Compute the sine of x in radians.",examples:["sin(2)","sin(pi / 4) ^ 2","sin(90 deg)","sin(30 deg)","sin(0.2)^2 + cos(0.2)^2"],seealso:["asin","cos","tan"]},er.docs.tan={name:"tan",category:"Trigonometry",syntax:["tan(x)"],description:"Compute the tangent of x in radians.",examples:["tan(0.5)","sin(0.5) / cos(0.5)","tan(pi / 4)","tan(45 deg)"],seealso:["atan","sin","cos"]},er.docs["in"]={name:"in",category:"Units",syntax:["x in unit","in(x, unit)"],description:"Change the unit of a value.",examples:["5 inch in cm","3.2kg in g","16 bytes in bits"],seealso:[]},er.docs.clone={name:"clone",category:"Utils",syntax:["clone(x)"],description:"Clone a variable. Creates a copy of primitive variables,and a deep copy of matrices",examples:["clone(3.5)","clone(2 - 4i)","clone(45 deg)","clone([1, 2; 3, 4])",'clone("hello world")'],seealso:[]},er.docs.eval={name:"eval",category:"Utils",syntax:["eval(expression)","eval([expr1, expr2, expr3, ...])"],description:"Evaluate an expression or an array with expressions.",examples:['eval("2 + 3")','eval("sqrt(" + 4 + ")")'],seealso:[]},er.docs.format={name:"format",category:"Utils",syntax:["format(value)"],description:"Format a value of any type as string.",examples:["format(2.3)","format(3 - 4i)","format([])"],seealso:[]},er.docs.help={name:"help",category:"Utils",syntax:["help(object)","help(string)"],description:"Display documentation on a function or data type.",examples:["help(sqrt)",'help("complex")'],seealso:[]},er.docs["import"]={name:"import",category:"Utils",syntax:["import(string)"],description:"Import functions from a file.",examples:['import("numbers")','import("./mylib.js")'],seealso:[]},er.docs["typeof"]={name:"typeof",category:"Utils",syntax:["typeof(x)"],description:"Get the type of a variable.",examples:["typeof(3.5)","typeof(2 - 4i)","typeof(45 deg)",'typeof("hello world")'],seealso:[]},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var r=0;r<this.length;r++)if(this[r]==e)return r;
return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,r){for(var t=0,n=this.length;n>t;++t)e.call(r||this,this[t],t,this)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.map||(Array.prototype.map=function(e,r){var t,n,a;if(null==this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(r&&(t=r),n=new Array(o),a=0;o>a;){var s,u;a in i&&(s=i[a],u=e.call(t,s,a,i),n[a]=u),a++}return n}),Array.prototype.every||(Array.prototype.every=function(e){"use strict";if(null==this)throw new TypeError;var r=Object(this),t=r.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],a=0;t>a;a++)if(a in r&&!e.call(n,r[a],a,r))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(null==this)throw new TypeError;var r=Object(this),t=r.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments[1],a=0;t>a;a++)if(a in r&&e.call(n,r[a],a,r))return!0;return!1}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),t=this,n=function(){},a=function(){return t.apply(this instanceof n&&e?this:e,r.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,a.prototype=new n,a});for(var or in er)er.hasOwnProperty(or)&&or&&y(or,er[or]);"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=er),"undefined"!=typeof exports&&(exports=er),"undefined"!=typeof require&&"undefined"!=typeof define&&define(function(){return er}),"undefined"!=typeof window&&(window.math?rr.deepExtend(window.math,er):window.math=er)}();